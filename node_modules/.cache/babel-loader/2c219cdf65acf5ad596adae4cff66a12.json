{"ast":null,"code":"import { STORE_KEY as e, INVALID_CONFIG as t, EXCEPTION_IN_SUBWINDOW as n, SUB_WINDOW_STATUS as r, CREATE_SUBWINDOW_FAILED as i, SUB_WINDOW_HEALTH_CHECK_INTERVAL as s, SUB_WINDOW_MONITOR_CLOSE_INTERVAL as o, SUB_WINDOW_IDNTIFICATION_KEY as u, INVALID_ARGUMENT as a, SUB_WINDOW_HEALTH_CHECK_MESSAGE as c, UNKNOWN as f, UNAUTHORIZED as l, SUB_WINDOW_MODAL_SCHEME_URL as d, FORBIDDEN as m } from \"@liff/consts\";\nimport { createLiffError as v, inMemoryStorage as p, isIpad as h, extractLiffId as w } from \"@liff/util\";\nimport { isInClient as g } from \"@liff/is-in-client\";\nimport { isApiAvailable as b } from \"@liff/is-api-available\";\nimport { __awaiter as S, __generator as y, __spread as I, __read as C } from \"tslib\";\nimport { logger as O } from \"@liff/logger\";\nimport { getOS as P } from \"@liff/get-os\";\nimport { fetch as L, getEndPoint as E, requestWithoutErrorHandling as N } from \"@liff/server-api\";\nimport { getConfig as T, getMSTChallenge as j, getMST as M, getAppData as B } from \"@liff/store\";\nimport D, { WINDOW as J, IDENTIFIER_KEY as R, CRYPTO_KEY as U } from \"@liff/message-bus\";\nimport { isSubWindow as W } from \"@liff/is-sub-window\";\nimport { closeWindow as A } from \"@liff/close-window\";\n\nfunction x(e) {\n  var t = E(\"subWindowGetOrigin\");\n  return L(t(e));\n}\n\nvar k = {};\n\nfunction K(e, t) {\n  e && k[e] && k[e].forEach(function (e) {\n    e(t);\n  });\n}\n\nvar G,\n    V,\n    F,\n    _,\n    q,\n    z = function () {\n  function n(e) {\n    this.storage = e;\n  }\n\n  return n.prototype.getItem = function (e) {\n    return this.storage.getItem(this.getKeyPrefix() + \":\" + e);\n  }, n.prototype.setItem = function (e, t) {\n    this.storage.setItem(this.getKeyPrefix() + \":\" + e, t);\n  }, n.prototype.removeItem = function (e) {\n    this.storage.removeItem(this.getKeyPrefix() + \":\" + e);\n  }, n.prototype.clear = function () {\n    this.storage.clear();\n  }, n.prototype.getKeyPrefix = function () {\n    return e + \":\" + this.getLiffId();\n  }, n.prototype.getLiffId = function () {\n    var e = T().liffId;\n    if (!e) throw v(t, \"liffId is necessary for liff.init()\");\n    return e;\n  }, n;\n}(),\n    H = new z(p);\n\nfunction Q() {\n  var e = H.getItem(\"subWindowStatusUpdated\");\n  return null !== e && JSON.parse(e);\n}\n\nfunction X(e) {\n  H.setItem(\"subWindowStatusUpdated\", String(e));\n}\n\nfunction Y(e) {\n  G = e;\n}\n\nfunction Z() {\n  return G;\n}\n\nfunction $() {\n  return F;\n}\n\nfunction ee() {\n  return _;\n}\n\nfunction te(e) {\n  return void 0 === e && (e = J.MAIN), S(this, void 0, void 0, function () {\n    return y(this, function (t) {\n      switch (t.label) {\n        case 0:\n          return [4, (q = new D(e)).setup()];\n\n        case 1:\n          return t.sent(), [2, q];\n      }\n    });\n  });\n}\n\nfunction ne() {\n  return q;\n}\n\nvar re = new z(window.sessionStorage);\n\nfunction ie(e) {\n  re.setItem(\"mainWindowOrigin\", e);\n}\n\nfunction se() {\n  return re.getItem(\"mainWindowOrigin\");\n}\n\nfunction oe(e, t) {\n  return void 0 === t && (t = {}), S(this, void 0, void 0, function () {\n    var i, s, o, u, a, c, f, l;\n    return y(this, function (d) {\n      switch (d.label) {\n        case 0:\n          if (null == (i = ne()) ? void 0 : i.isReady()) return [3, 5];\n          if (s = JSON.stringify(t), o = T().liffId, u = se(), !window.opener || !u || !o) throw v(n);\n          a = !1, d.label = 1;\n\n        case 1:\n          return d.trys.push([1, 3,, 4]), [4, x(o)];\n\n        case 2:\n          return c = d.sent(), a = c.subwindowCommonModule, [3, 4];\n\n        case 3:\n          throw f = d.sent(), O.debug(f), v(n);\n\n        case 4:\n          return l = a ? u : location.origin, [2, new Promise(function (t) {\n            window.addEventListener(\"message\", function n(i) {\n              (function (e) {\n                if (e.data && \"string\" == typeof e.data.type && [r.SUBMIT, r.CANCEL].includes(e.data.type)) return !0;\n                return !1;\n              })(i) && (window.removeEventListener(\"message\", n), t({\n                status: e,\n                result: s\n              }));\n            }), window.opener.postMessage({\n              status: e,\n              result: s\n            }, l);\n          })];\n\n        case 5:\n          return i.send({\n            eventName: e,\n            data: t\n          }), [4, new Promise(function (e) {\n            setTimeout(e, 500);\n          })];\n\n        case 6:\n          return d.sent(), [2, {\n            status: e,\n            result: JSON.stringify(t)\n          }];\n      }\n    });\n  });\n}\n\nfunction ue(e) {\n  var t,\n      n = ee();\n\n  if (e.origin === n) {\n    var i = e.data;\n\n    if (i) {\n      var s,\n          o = i.status,\n          u = i.result;\n\n      try {\n        s = JSON.parse(u || \"{}\");\n      } catch (a) {\n        s = {};\n      }\n\n      switch (o) {\n        case c:\n          window.clearInterval($()), le();\n          break;\n\n        case r.CANCEL:\n        case r.SUBMIT:\n          X(!0), window.clearInterval($()), window.removeEventListener(\"message\", ue), K(o, s), null === (t = Z()) || void 0 === t || t.postMessage({\n            type: o\n          }, ee());\n          break;\n\n        default:\n          O.debug(\"unexpected message\");\n      }\n    }\n  }\n}\n\nvar ae = function (e) {\n  return S(void 0, void 0, void 0, function () {\n    var t, n, i, s;\n    return y(this, function (o) {\n      if (Q()) return [2];\n\n      switch (t = e.context, n = t.eventName, i = t.data, s = ne(), n) {\n        case r.INIT:\n          fe(!i.hasOpener);\n          break;\n\n        case r.CANCEL:\n        case r.SUBMIT:\n          X(!0), K(n, i), null == s || s.reply(e, {\n            eventName: n\n          });\n          break;\n\n        case r.CLOSE:\n          !1 === Q() && (X(!0), K(r.CLOSE, {})), le();\n      }\n\n      return [2];\n    });\n  });\n};\n\nfunction ce() {\n  window.clearInterval(V), window.clearInterval($()), window.removeEventListener(\"message\", ue);\n}\n\nfunction fe(e) {\n  if (void 0 === e && (e = !1), ce(), X(!1), e) {\n    var t = Z();\n    t && (t.close(), Y(null));\n  }\n}\n\nfunction le() {\n  return S(this, void 0, void 0, function () {\n    var e;\n    return y(this, function (t) {\n      switch (t.label) {\n        case 0:\n          return (e = ne()) ? [4, e.teardown()] : [3, 2];\n\n        case 1:\n          t.sent(), t.label = 2;\n\n        case 2:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction de(e) {\n  return S(this, void 0, void 0, function () {\n    var t, n, f, l, d, m, p, g, b, S;\n    return y(this, function (y) {\n      switch (y.label) {\n        case 0:\n          return (t = w(e.url)) ? (fe(!0), [4, le()]) : [2, Promise.reject(v(a, \"params.url must be liff url\"))];\n\n        case 1:\n          return y.sent(), n = e.url, f = e.appData, (l = new URL(n)).searchParams.append(u, \"true\"), [4, te()];\n\n        case 2:\n          return d = y.sent(), l.searchParams.append(R, d.identification.identifier), l.searchParams.append(U, d.identification.cryptoKey), l.hostname = function (e) {\n            var t = C(e.split(\".\")),\n                n = t[0],\n                r = t.slice(1);\n            return I([n + \"-ext\"], r).join(\".\");\n          }(l.hostname), m = l.toString(), Y(\"ios\" !== P() || h() ? window.open(\"\", \"liffsubwindow\", \"width=480, height=640, menubar=no, toolbar=no, scrollbars=yes\") : window.open()), [4, x(t)];\n\n        case 3:\n          if (p = y.sent(), g = p.origin, b = p.subwindowCommonModule, !(S = Z())) throw v(i);\n          return b ? (function (e) {\n            _ = e;\n          }(g), d.listen(ae), d.setData(\"appData\", f), window.addEventListener(\"message\", ue), S.location.href = m, O = function (e, t) {\n            var n = Z(),\n                r = {\n              type: c\n            };\n            return t && (r.message = JSON.stringify(t)), window.setInterval(function () {\n              null == n || n.postMessage(r, e);\n            }, s);\n          }(g, f), F = O, function (e) {\n            V = e;\n          }(window.setInterval(function () {\n            var e = Z();\n            e && e.closed && (ce(), Y(null), !1 === Q() && (X(!0), K(r.CLOSE, {})));\n          }, o)), [2]) : (S.close(), [2]);\n      }\n\n      var O;\n    });\n  });\n}\n\nfunction me(e) {\n  return S(this, void 0, void 0, function () {\n    var t, n, i, s, o, u, c, l, d, m, p;\n    return y(this, function (h) {\n      switch (h.label) {\n        case 0:\n          t = e.msit, n = e.mstChallenge, i = e.onSuccess, s = e.onError, o = e.reconnectCount, u = void 0 === o ? 0 : o, h.label = 1;\n\n        case 1:\n          return h.trys.push([1, 3,, 6]), [4, N(E(\"subWindowSubscribe\"), {\n            method: \"POST\",\n            body: JSON.stringify({\n              msit: t,\n              mstChallenge: n\n            })\n          })];\n\n        case 2:\n          return c = h.sent(), [3, 6];\n\n        case 3:\n          return h.sent(), [4, ve()];\n\n        case 4:\n          return h.sent(), [4, he(me, {\n            msit: t,\n            mstChallenge: n,\n            onSuccess: i,\n            onError: s,\n            reconnectCount: u += 1\n          })];\n\n        case 5:\n          return h.sent(), [2];\n\n        case 6:\n          return c.status >= 500 ? [4, ve()] : [3, 9];\n\n        case 7:\n          return h.sent(), [4, he(me, {\n            msit: t,\n            mstChallenge: n,\n            onSuccess: i,\n            onError: s,\n            reconnectCount: u += 1\n          })];\n\n        case 8:\n          return h.sent(), [3, 20];\n\n        case 9:\n          return c.status >= 400 && 500 > c.status ? [4, pe(c)] : [3, 11];\n\n        case 10:\n          return (d = h.sent()) ? (l = d.errorDetail, s(v(a, l))) : s(v(f, \"Some error happened in the server\")), [3, 20];\n\n        case 11:\n          return 200 !== c.status ? [3, 19] : [4, pe(c)];\n\n        case 12:\n          return (d = h.sent()) ? [3, 13] : (s(v(f, \"Some error happened in the server\")), [3, 18]);\n\n        case 13:\n          switch (m = d.status, p = d.result, m) {\n            case r.ERROR:\n              return [3, 14];\n\n            case r.CLOSE:\n            case r.CANCEL:\n            case r.SUBMIT:\n              return [3, 16];\n          }\n\n          return [3, 17];\n\n        case 14:\n          return [4, he(me, {\n            msit: t,\n            mstChallenge: n,\n            onSuccess: i,\n            onError: s,\n            reconnectCount: u\n          })];\n\n        case 15:\n          return h.sent(), [3, 18];\n\n        case 16:\n          return i(m, p), [3, 18];\n\n        case 17:\n          s(v(f, \"Some error happened in the server\")), h.label = 18;\n\n        case 18:\n          return [3, 20];\n\n        case 19:\n          s(v(f, \"Some error happened in the server\")), h.label = 20;\n\n        case 20:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction ve() {\n  return new Promise(function (e) {\n    return setTimeout(e, 1e3);\n  });\n}\n\nfunction pe(e) {\n  return S(this, void 0, void 0, function () {\n    return y(this, function (t) {\n      switch (t.label) {\n        case 0:\n          return t.trys.push([0, 2,, 3]), [4, e.json()];\n\n        case 1:\n          return [2, t.sent()];\n\n        case 2:\n          return t.sent(), [2, null];\n\n        case 3:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction he(e, t) {\n  return S(this, void 0, void 0, function () {\n    return y(this, function (n) {\n      switch (n.label) {\n        case 0:\n          return t.reconnectCount >= 10 ? (t.onError(v(f, \"Failed to connect\")), [3, 3]) : [3, 1];\n\n        case 1:\n          return [4, e(t)];\n\n        case 2:\n          n.sent(), n.label = 3;\n\n        case 3:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction we(e) {\n  var t = {};\n  return Object.keys(e).forEach(function (n) {\n    \"closeButtonColor\" === n ? \"white\" === e[n] ? t[n] = \"#ffffff\" : t[n] = \"#000000\" : t[n] = e[n];\n  }), t;\n}\n\nvar ge = {\n  height: \"full\",\n  closeButtonPosition: \"right\",\n  closeButtonColor: \"black\",\n  closeButtonLabel: \"\"\n};\n\nfunction be(e) {\n  var t = e.appData,\n      n = e.native,\n      i = T().liffId,\n      s = j(),\n      o = w(e.url);\n  if (!i) return Promise.reject(v(l, \"liffId is invalid\"));\n  if (!s) return Promise.reject(v(l, \"mst_challenge is invalid\"));\n  if (!o) return Promise.reject(v(a, \"params.url must be liff url\"));\n  var u = Object.assign({}, ge, n);\n  return function (e) {\n    var t = e.mainLiffId,\n        n = e.subLiffId,\n        r = e.mstChallenge,\n        i = e.appData,\n        s = e.view;\n    return t && r ? L(E(\"subWindowGetMSIT\"), {\n      method: \"POST\",\n      body: JSON.stringify({\n        mainLiffId: t,\n        subLiffId: n,\n        mstChallenge: r,\n        appData: i,\n        view: s\n      })\n    }) : Promise.reject(v(a, \"no proper argument\"));\n  }({\n    mainLiffId: i,\n    subLiffId: o,\n    mstChallenge: s,\n    appData: t,\n    view: we(u)\n  }).then(function (t) {\n    var n = t.msit;\n    me({\n      msit: n,\n      mstChallenge: s,\n      onSuccess: function (e, t) {\n        K(e, t);\n      },\n      onError: function (e) {\n        K(r.ERROR, e);\n      }\n    }), function (e, t) {\n      var n = e.url,\n          r = new URLSearchParams();\n      r.set(\"msit\", t), location.href = d + \"?url=\" + encodeURIComponent(n) + \"&\" + r.toString();\n    }(e, n);\n  });\n}\n\nfunction Se() {\n  if (!W()) throw v(l, \"this api can be only called in child window\");\n}\n\nfunction ye(e) {\n  if (!e.mst || !e.status) return Promise.reject(v(a, \"no proper argument\"));\n  var t = JSON.stringify(e);\n  return L(E(\"subWindowPost\"), {\n    method: \"POST\",\n    body: t\n  });\n}\n\nfunction Ie(e) {\n  var t = e.msit,\n      n = e.mstVerifier;\n  return t && n ? L(E(\"subWindowGetMSTByMSIT\"), {\n    method: \"POST\",\n    body: JSON.stringify({\n      msit: t,\n      mstVerifier: n\n    })\n  }) : Promise.reject(v(a, \"no proper argument\"));\n}\n\nfunction Ce(e) {\n  var t = e.mst;\n  return t ? L(E(\"subWindowGetAppData\"), {\n    method: \"POST\",\n    body: JSON.stringify({\n      mst: t\n    })\n  }) : Promise.reject(v(a, \"no proper argument\"));\n}\n\nvar Oe = {\n  on: function (e, t) {\n    k[e] || (k[e] = []), k[e].push(t);\n  },\n  off: function (e, t) {\n    if (k[e]) {\n      var n = k[e].indexOf(t);\n      n >= 0 && k[e].splice(n, 1);\n    }\n  },\n  open: function (e) {\n    if (!b(\"subwindowOpen\")) throw v(m, \"No permission for liff.subWindow.open()\");\n    return function () {\n      if (W()) throw v(l, \"this api can be only called in parent window\");\n    }(), g() ? be(e) : de(e);\n  },\n  cancel: function (e) {\n    return void 0 === e && (e = {}), Se(), g() ? function (e) {\n      return void 0 === e && (e = {}), S(this, void 0, void 0, function () {\n        var t, n;\n        return y(this, function (i) {\n          switch (i.label) {\n            case 0:\n              return (t = M()) ? [4, ye({\n                mst: t,\n                status: r.CANCEL,\n                result: e\n              })] : [2, Promise.reject(v(l, \"mst is invalid\"))];\n\n            case 1:\n              return n = i.sent(), X(!0), [2, n];\n          }\n        });\n      });\n    }(e) : function (e) {\n      return void 0 === e && (e = {}), oe(r.CANCEL, e);\n    }(e);\n  },\n  submit: function (e) {\n    return void 0 === e && (e = {}), Se(), g() ? function (e) {\n      return void 0 === e && (e = {}), S(this, void 0, void 0, function () {\n        var t, n;\n        return y(this, function (i) {\n          switch (i.label) {\n            case 0:\n              return (t = M()) ? [4, ye({\n                mst: t,\n                status: r.SUBMIT,\n                result: e\n              })] : [2, Promise.reject(v(l, \"mst is invalid\"))];\n\n            case 1:\n              return n = i.sent(), X(!0), [2, n];\n          }\n        });\n      });\n    }(e) : function (e) {\n      return void 0 === e && (e = {}), oe(r.SUBMIT, e);\n    }(e);\n  },\n  close: function () {\n    return Se(), g() ? function () {\n      return S(this, void 0, void 0, function () {\n        var e;\n        return y(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return !1 !== Q() ? [3, 2] : (e = M()) ? [4, ye({\n                mst: e,\n                status: r.CLOSE,\n                result: {}\n              })] : [2, Promise.reject(v(l, \"mst is invalid\"))];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return A(), [2];\n          }\n        });\n      });\n    }() : function () {\n      return S(this, void 0, void 0, function () {\n        var e;\n        return y(this, function (t) {\n          return (null == (e = ne()) ? void 0 : e.isReady()) ? (e.send({\n            eventName: r.CLOSE\n          }), [2, new Promise(function (e) {\n            setTimeout(function () {\n              A(), e();\n            }, s);\n          })]) : (A(), [2, Promise.resolve()]);\n        });\n      });\n    }();\n  },\n  getAppData: function () {\n    return Se(), function () {\n      var e,\n          t = B();\n\n      try {\n        e = t ? JSON.parse(t) : {};\n      } catch (n) {\n        e = {};\n      }\n\n      return Promise.resolve(e);\n    }();\n  }\n};\nexport { Ce as getAppData, Ie as getMSTByMSIT, se as getMainWindowOrigin, ne as getMessageBus, te as initMessageBus, ie as setMainWindowOrigin, Oe as subWindow };","map":{"version":3,"names":["STORE_KEY","e","INVALID_CONFIG","t","EXCEPTION_IN_SUBWINDOW","n","SUB_WINDOW_STATUS","r","CREATE_SUBWINDOW_FAILED","i","SUB_WINDOW_HEALTH_CHECK_INTERVAL","s","SUB_WINDOW_MONITOR_CLOSE_INTERVAL","o","SUB_WINDOW_IDNTIFICATION_KEY","u","INVALID_ARGUMENT","a","SUB_WINDOW_HEALTH_CHECK_MESSAGE","c","UNKNOWN","f","UNAUTHORIZED","l","SUB_WINDOW_MODAL_SCHEME_URL","d","FORBIDDEN","m","createLiffError","v","inMemoryStorage","p","isIpad","h","extractLiffId","w","isInClient","g","isApiAvailable","b","__awaiter","S","__generator","y","__spread","I","__read","C","logger","O","getOS","P","fetch","L","getEndPoint","E","requestWithoutErrorHandling","N","getConfig","T","getMSTChallenge","j","getMST","M","getAppData","B","D","WINDOW","J","IDENTIFIER_KEY","R","CRYPTO_KEY","U","isSubWindow","W","closeWindow","A","x","k","K","forEach","G","V","F","_","q","z","storage","prototype","getItem","getKeyPrefix","setItem","removeItem","clear","getLiffId","liffId","H","Q","JSON","parse","X","String","Y","Z","$","ee","te","MAIN","label","setup","sent","ne","re","window","sessionStorage","ie","se","oe","isReady","stringify","opener","trys","push","subwindowCommonModule","debug","location","origin","Promise","addEventListener","data","type","SUBMIT","CANCEL","includes","removeEventListener","status","result","postMessage","send","eventName","setTimeout","ue","clearInterval","le","ae","context","INIT","fe","hasOpener","reply","CLOSE","ce","close","teardown","de","url","reject","appData","URL","searchParams","append","identification","identifier","cryptoKey","hostname","split","slice","join","toString","open","listen","setData","href","message","setInterval","closed","me","msit","mstChallenge","onSuccess","onError","reconnectCount","method","body","ve","he","pe","errorDetail","ERROR","json","we","Object","keys","ge","height","closeButtonPosition","closeButtonColor","closeButtonLabel","be","native","assign","mainLiffId","subLiffId","view","then","URLSearchParams","set","encodeURIComponent","Se","ye","mst","Ie","mstVerifier","Ce","Oe","on","off","indexOf","splice","cancel","submit","resolve","getMSTByMSIT","getMainWindowOrigin","getMessageBus","initMessageBus","setMainWindowOrigin","subWindow"],"sources":["C:/Users/ASUS/Desktop/linetest/node_modules/@liff/sub-window/lib/index.es.js"],"sourcesContent":["import{STORE_KEY as e,INVALID_CONFIG as t,EXCEPTION_IN_SUBWINDOW as n,SUB_WINDOW_STATUS as r,CREATE_SUBWINDOW_FAILED as i,SUB_WINDOW_HEALTH_CHECK_INTERVAL as s,SUB_WINDOW_MONITOR_CLOSE_INTERVAL as o,SUB_WINDOW_IDNTIFICATION_KEY as u,INVALID_ARGUMENT as a,SUB_WINDOW_HEALTH_CHECK_MESSAGE as c,UNKNOWN as f,UNAUTHORIZED as l,SUB_WINDOW_MODAL_SCHEME_URL as d,FORBIDDEN as m}from\"@liff/consts\";import{createLiffError as v,inMemoryStorage as p,isIpad as h,extractLiffId as w}from\"@liff/util\";import{isInClient as g}from\"@liff/is-in-client\";import{isApiAvailable as b}from\"@liff/is-api-available\";import{__awaiter as S,__generator as y,__spread as I,__read as C}from\"tslib\";import{logger as O}from\"@liff/logger\";import{getOS as P}from\"@liff/get-os\";import{fetch as L,getEndPoint as E,requestWithoutErrorHandling as N}from\"@liff/server-api\";import{getConfig as T,getMSTChallenge as j,getMST as M,getAppData as B}from\"@liff/store\";import D,{WINDOW as J,IDENTIFIER_KEY as R,CRYPTO_KEY as U}from\"@liff/message-bus\";import{isSubWindow as W}from\"@liff/is-sub-window\";import{closeWindow as A}from\"@liff/close-window\";function x(e){var t=E(\"subWindowGetOrigin\");return L(t(e))}var k={};function K(e,t){e&&k[e]&&k[e].forEach((function(e){e(t)}))}var G,V,F,_,q,z=function(){function n(e){this.storage=e}return n.prototype.getItem=function(e){return this.storage.getItem(this.getKeyPrefix()+\":\"+e)},n.prototype.setItem=function(e,t){this.storage.setItem(this.getKeyPrefix()+\":\"+e,t)},n.prototype.removeItem=function(e){this.storage.removeItem(this.getKeyPrefix()+\":\"+e)},n.prototype.clear=function(){this.storage.clear()},n.prototype.getKeyPrefix=function(){return e+\":\"+this.getLiffId()},n.prototype.getLiffId=function(){var e=T().liffId;if(!e)throw v(t,\"liffId is necessary for liff.init()\");return e},n}(),H=new z(p);function Q(){var e=H.getItem(\"subWindowStatusUpdated\");return null!==e&&JSON.parse(e)}function X(e){H.setItem(\"subWindowStatusUpdated\",String(e))}function Y(e){G=e}function Z(){return G}function $(){return F}function ee(){return _}function te(e){return void 0===e&&(e=J.MAIN),S(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,(q=new D(e)).setup()];case 1:return t.sent(),[2,q]}}))}))}function ne(){return q}var re=new z(window.sessionStorage);function ie(e){re.setItem(\"mainWindowOrigin\",e)}function se(){return re.getItem(\"mainWindowOrigin\")}function oe(e,t){return void 0===t&&(t={}),S(this,void 0,void 0,(function(){var i,s,o,u,a,c,f,l;return y(this,(function(d){switch(d.label){case 0:if(null==(i=ne())?void 0:i.isReady())return[3,5];if(s=JSON.stringify(t),o=T().liffId,u=se(),!window.opener||!u||!o)throw v(n);a=!1,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,x(o)];case 2:return c=d.sent(),a=c.subwindowCommonModule,[3,4];case 3:throw f=d.sent(),O.debug(f),v(n);case 4:return l=a?u:location.origin,[2,new Promise((function(t){window.addEventListener(\"message\",(function n(i){(function(e){if(e.data&&\"string\"==typeof e.data.type&&[r.SUBMIT,r.CANCEL].includes(e.data.type))return!0;return!1})(i)&&(window.removeEventListener(\"message\",n),t({status:e,result:s}))})),window.opener.postMessage({status:e,result:s},l)}))];case 5:return i.send({eventName:e,data:t}),[4,new Promise((function(e){setTimeout(e,500)}))];case 6:return d.sent(),[2,{status:e,result:JSON.stringify(t)}]}}))}))}function ue(e){var t,n=ee();if(e.origin===n){var i=e.data;if(i){var s,o=i.status,u=i.result;try{s=JSON.parse(u||\"{}\")}catch(a){s={}}switch(o){case c:window.clearInterval($()),le();break;case r.CANCEL:case r.SUBMIT:X(!0),window.clearInterval($()),window.removeEventListener(\"message\",ue),K(o,s),null===(t=Z())||void 0===t||t.postMessage({type:o},ee());break;default:O.debug(\"unexpected message\")}}}}var ae=function(e){return S(void 0,void 0,void 0,(function(){var t,n,i,s;return y(this,(function(o){if(Q())return[2];switch(t=e.context,n=t.eventName,i=t.data,s=ne(),n){case r.INIT:fe(!i.hasOpener);break;case r.CANCEL:case r.SUBMIT:X(!0),K(n,i),null==s||s.reply(e,{eventName:n});break;case r.CLOSE:!1===Q()&&(X(!0),K(r.CLOSE,{})),le()}return[2]}))}))};function ce(){window.clearInterval(V),window.clearInterval($()),window.removeEventListener(\"message\",ue)}function fe(e){if(void 0===e&&(e=!1),ce(),X(!1),e){var t=Z();t&&(t.close(),Y(null))}}function le(){return S(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=ne())?[4,e.teardown()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}function de(e){return S(this,void 0,void 0,(function(){var t,n,f,l,d,m,p,g,b,S;return y(this,(function(y){switch(y.label){case 0:return(t=w(e.url))?(fe(!0),[4,le()]):[2,Promise.reject(v(a,\"params.url must be liff url\"))];case 1:return y.sent(),n=e.url,f=e.appData,(l=new URL(n)).searchParams.append(u,\"true\"),[4,te()];case 2:return d=y.sent(),l.searchParams.append(R,d.identification.identifier),l.searchParams.append(U,d.identification.cryptoKey),l.hostname=function(e){var t=C(e.split(\".\")),n=t[0],r=t.slice(1);return I([n+\"-ext\"],r).join(\".\")}(l.hostname),m=l.toString(),Y(\"ios\"!==P()||h()?window.open(\"\",\"liffsubwindow\",\"width=480, height=640, menubar=no, toolbar=no, scrollbars=yes\"):window.open()),[4,x(t)];case 3:if(p=y.sent(),g=p.origin,b=p.subwindowCommonModule,!(S=Z()))throw v(i);return b?(function(e){_=e}(g),d.listen(ae),d.setData(\"appData\",f),window.addEventListener(\"message\",ue),S.location.href=m,O=function(e,t){var n=Z(),r={type:c};return t&&(r.message=JSON.stringify(t)),window.setInterval((function(){null==n||n.postMessage(r,e)}),s)}(g,f),F=O,function(e){V=e}(window.setInterval((function(){var e=Z();e&&e.closed&&(ce(),Y(null),!1===Q()&&(X(!0),K(r.CLOSE,{})))}),o)),[2]):(S.close(),[2])}var O}))}))}function me(e){return S(this,void 0,void 0,(function(){var t,n,i,s,o,u,c,l,d,m,p;return y(this,(function(h){switch(h.label){case 0:t=e.msit,n=e.mstChallenge,i=e.onSuccess,s=e.onError,o=e.reconnectCount,u=void 0===o?0:o,h.label=1;case 1:return h.trys.push([1,3,,6]),[4,N(E(\"subWindowSubscribe\"),{method:\"POST\",body:JSON.stringify({msit:t,mstChallenge:n})})];case 2:return c=h.sent(),[3,6];case 3:return h.sent(),[4,ve()];case 4:return h.sent(),[4,he(me,{msit:t,mstChallenge:n,onSuccess:i,onError:s,reconnectCount:u+=1})];case 5:return h.sent(),[2];case 6:return c.status>=500?[4,ve()]:[3,9];case 7:return h.sent(),[4,he(me,{msit:t,mstChallenge:n,onSuccess:i,onError:s,reconnectCount:u+=1})];case 8:return h.sent(),[3,20];case 9:return c.status>=400&&500>c.status?[4,pe(c)]:[3,11];case 10:return(d=h.sent())?(l=d.errorDetail,s(v(a,l))):s(v(f,\"Some error happened in the server\")),[3,20];case 11:return 200!==c.status?[3,19]:[4,pe(c)];case 12:return(d=h.sent())?[3,13]:(s(v(f,\"Some error happened in the server\")),[3,18]);case 13:switch(m=d.status,p=d.result,m){case r.ERROR:return[3,14];case r.CLOSE:case r.CANCEL:case r.SUBMIT:return[3,16]}return[3,17];case 14:return[4,he(me,{msit:t,mstChallenge:n,onSuccess:i,onError:s,reconnectCount:u})];case 15:return h.sent(),[3,18];case 16:return i(m,p),[3,18];case 17:s(v(f,\"Some error happened in the server\")),h.label=18;case 18:return[3,20];case 19:s(v(f,\"Some error happened in the server\")),h.label=20;case 20:return[2]}}))}))}function ve(){return new Promise((function(e){return setTimeout(e,1e3)}))}function pe(e){return S(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.json()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))}function he(e,t){return S(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return t.reconnectCount>=10?(t.onError(v(f,\"Failed to connect\")),[3,3]):[3,1];case 1:return[4,e(t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function we(e){var t={};return Object.keys(e).forEach((function(n){\"closeButtonColor\"===n?\"white\"===e[n]?t[n]=\"#ffffff\":t[n]=\"#000000\":t[n]=e[n]})),t}var ge={height:\"full\",closeButtonPosition:\"right\",closeButtonColor:\"black\",closeButtonLabel:\"\"};function be(e){var t=e.appData,n=e.native,i=T().liffId,s=j(),o=w(e.url);if(!i)return Promise.reject(v(l,\"liffId is invalid\"));if(!s)return Promise.reject(v(l,\"mst_challenge is invalid\"));if(!o)return Promise.reject(v(a,\"params.url must be liff url\"));var u=Object.assign({},ge,n);return function(e){var t=e.mainLiffId,n=e.subLiffId,r=e.mstChallenge,i=e.appData,s=e.view;return t&&r?L(E(\"subWindowGetMSIT\"),{method:\"POST\",body:JSON.stringify({mainLiffId:t,subLiffId:n,mstChallenge:r,appData:i,view:s})}):Promise.reject(v(a,\"no proper argument\"))}({mainLiffId:i,subLiffId:o,mstChallenge:s,appData:t,view:we(u)}).then((function(t){var n=t.msit;me({msit:n,mstChallenge:s,onSuccess:function(e,t){K(e,t)},onError:function(e){K(r.ERROR,e)}}),function(e,t){var n=e.url,r=new URLSearchParams;r.set(\"msit\",t),location.href=d+\"?url=\"+encodeURIComponent(n)+\"&\"+r.toString()}(e,n)}))}function Se(){if(!W())throw v(l,\"this api can be only called in child window\")}function ye(e){if(!e.mst||!e.status)return Promise.reject(v(a,\"no proper argument\"));var t=JSON.stringify(e);return L(E(\"subWindowPost\"),{method:\"POST\",body:t})}function Ie(e){var t=e.msit,n=e.mstVerifier;return t&&n?L(E(\"subWindowGetMSTByMSIT\"),{method:\"POST\",body:JSON.stringify({msit:t,mstVerifier:n})}):Promise.reject(v(a,\"no proper argument\"))}function Ce(e){var t=e.mst;return t?L(E(\"subWindowGetAppData\"),{method:\"POST\",body:JSON.stringify({mst:t})}):Promise.reject(v(a,\"no proper argument\"))}var Oe={on:function(e,t){k[e]||(k[e]=[]),k[e].push(t)},off:function(e,t){if(k[e]){var n=k[e].indexOf(t);n>=0&&k[e].splice(n,1)}},open:function(e){if(!b(\"subwindowOpen\"))throw v(m,\"No permission for liff.subWindow.open()\");return function(){if(W())throw v(l,\"this api can be only called in parent window\")}(),g()?be(e):de(e)},cancel:function(e){return void 0===e&&(e={}),Se(),g()?function(e){return void 0===e&&(e={}),S(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return(t=M())?[4,ye({mst:t,status:r.CANCEL,result:e})]:[2,Promise.reject(v(l,\"mst is invalid\"))];case 1:return n=i.sent(),X(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),oe(r.CANCEL,e)}(e)},submit:function(e){return void 0===e&&(e={}),Se(),g()?function(e){return void 0===e&&(e={}),S(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return(t=M())?[4,ye({mst:t,status:r.SUBMIT,result:e})]:[2,Promise.reject(v(l,\"mst is invalid\"))];case 1:return n=i.sent(),X(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),oe(r.SUBMIT,e)}(e)},close:function(){return Se(),g()?function(){return S(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return!1!==Q()?[3,2]:(e=M())?[4,ye({mst:e,status:r.CLOSE,result:{}})]:[2,Promise.reject(v(l,\"mst is invalid\"))];case 1:t.sent(),t.label=2;case 2:return A(),[2]}}))}))}():function(){return S(this,void 0,void 0,(function(){var e;return y(this,(function(t){return(null==(e=ne())?void 0:e.isReady())?(e.send({eventName:r.CLOSE}),[2,new Promise((function(e){setTimeout((function(){A(),e()}),s)}))]):(A(),[2,Promise.resolve()])}))}))}()},getAppData:function(){return Se(),function(){var e,t=B();try{e=t?JSON.parse(t):{}}catch(n){e={}}return Promise.resolve(e)}()}};export{Ce as getAppData,Ie as getMSTByMSIT,se as getMainWindowOrigin,ne as getMessageBus,te as initMessageBus,ie as setMainWindowOrigin,Oe as subWindow};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}