{"ast":null,"code":"import { __assign as e, __awaiter as t, __generator as a } from \"tslib\";\nimport { UNKNOWN as n, UNAUTHORIZED as r } from \"@liff/consts\";\nimport { createLiffError as i, HTTPStatusCodes as s } from \"@liff/util\";\nimport { getAccessToken as o } from \"@liff/store\";\n\nfunction u(e) {\n  return t(this, void 0, void 0, function () {\n    var t, r, o;\n    return a(this, function (a) {\n      switch (a.label) {\n        case 0:\n          if (!e.ok) return [3, 4];\n          a.label = 1;\n\n        case 1:\n          return a.trys.push([1, 3,, 4]), [4, e.json()];\n\n        case 2:\n          return [2, a.sent()];\n\n        case 3:\n          return a.sent(), [2, e];\n\n        case 4:\n          return t = String(e.status), r = s.has(t) ? t : n, [4, e.json().catch(function () {\n            throw i(r, e.statusText);\n          })];\n\n        case 5:\n          throw o = a.sent(), i(o.error || r, o.error_description || o.message);\n      }\n    });\n  });\n}\n\nfunction f(t) {\n  var a = function (e) {\n    if (e) return e;\n    var t = o();\n    if (!t) throw i(r, \"Need access_token for api call, Please login first\");\n    return {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: \"Bearer \" + t\n    };\n  }(t && t.headers);\n\n  return e(e({}, t), {\n    headers: a\n  });\n}\n\nfunction c(e, t) {\n  var a;\n\n  try {\n    a = f(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n\n  return fetch(e, a).then(u);\n}\n\nfunction p(e, t) {\n  var a;\n\n  try {\n    a = f(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n\n  return fetch(e, a);\n}\n\nfunction h(e) {\n  var t = e.subdomain;\n  return \"https://\" + (void 0 === t ? \"api\" : t) + \".line.me/\" + e.pathname;\n}\n\nvar m = {\n  token: h({\n    pathname: \"oauth2/v2.1/token\"\n  }),\n  certs: h({\n    pathname: \"oauth2/v2.1/certs\"\n  }),\n  \"openid-configuration\": h({\n    subdomain: \"access\",\n    pathname: \".well-known/openid-configuration\"\n  }),\n  authorize: h({\n    subdomain: \"access\",\n    pathname: \"liff/v1/authorize\"\n  }),\n  profile: h({\n    pathname: \"v2/profile\"\n  }),\n  message: h({\n    pathname: \"message/v3/share\"\n  }),\n  messageOTT: h({\n    pathname: \"message/v3/multisend?type=ott\"\n  }),\n  friendship: h({\n    pathname: \"friendship/v1/status\"\n  }),\n  shareTargetPicker: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker\"\n  }),\n  shareTargetPickerOtt: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  shareTargetPickerResult: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker/result\"\n  }),\n  apps: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  subWindowGetMSIT: h({\n    pathname: \"liff/v2/sub/msit\"\n  }),\n  subWindowGetMSTByMSIT: h({\n    pathname: \"liff/v2/sub/mst\"\n  }),\n  subWindowSubscribe: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/sub/waitResult\"\n  }),\n  subWindowPost: h({\n    pathname: \"liff/v2/sub/result\"\n  }),\n  subWindowGetAppData: h({\n    pathname: \"liff/v2/sub/appData\"\n  }),\n  subWindowGetOrigin: function (e) {\n    return h({\n      pathname: \"liff/v2/sub/\" + e + \"/origin\"\n    });\n  },\n  accessTokenVerify: h({\n    pathname: \"oauth2/v2.1/verify\"\n  }),\n  unauthorizedPermissions: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/incrementalAgreement/unauthorizedPermissions\"\n  }),\n  permanentLink: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/permanentLink\"\n  })\n};\n\nfunction l(e) {\n  return m[e];\n}\n\nfunction v(e) {\n  return c(l(\"accessTokenVerify\") + \"?access_token=\" + encodeURIComponent(e), {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  });\n}\n\nexport { c as fetch, l as getEndPoint, p as requestWithoutErrorHandling, v as verifyAccessToken };","map":{"version":3,"names":["__assign","e","__awaiter","t","__generator","a","UNKNOWN","n","UNAUTHORIZED","r","createLiffError","i","HTTPStatusCodes","s","getAccessToken","o","u","label","ok","trys","push","json","sent","String","status","has","catch","statusText","error","error_description","message","f","Accept","Authorization","headers","c","Promise","reject","fetch","then","p","h","subdomain","pathname","m","token","certs","authorize","profile","messageOTT","friendship","shareTargetPicker","shareTargetPickerOtt","shareTargetPickerResult","apps","subWindowGetMSIT","subWindowGetMSTByMSIT","subWindowSubscribe","subWindowPost","subWindowGetAppData","subWindowGetOrigin","accessTokenVerify","unauthorizedPermissions","permanentLink","l","v","encodeURIComponent","getEndPoint","requestWithoutErrorHandling","verifyAccessToken"],"sources":["C:/Users/ASUS/Desktop/linetest/node_modules/@liff/server-api/lib/index.es.js"],"sourcesContent":["import{__assign as e,__awaiter as t,__generator as a}from\"tslib\";import{UNKNOWN as n,UNAUTHORIZED as r}from\"@liff/consts\";import{createLiffError as i,HTTPStatusCodes as s}from\"@liff/util\";import{getAccessToken as o}from\"@liff/store\";function u(e){return t(this,void 0,void 0,(function(){var t,r,o;return a(this,(function(a){switch(a.label){case 0:if(!e.ok)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.json()];case 2:return[2,a.sent()];case 3:return a.sent(),[2,e];case 4:return t=String(e.status),r=s.has(t)?t:n,[4,e.json().catch((function(){throw i(r,e.statusText)}))];case 5:throw o=a.sent(),i(o.error||r,o.error_description||o.message)}}))}))}function f(t){var a=function(e){if(e)return e;var t=o();if(!t)throw i(r,\"Need access_token for api call, Please login first\");return{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \"+t}}(t&&t.headers);return e(e({},t),{headers:a})}function c(e,t){var a;try{a=f(t)}catch(n){return Promise.reject(n)}return fetch(e,a).then(u)}function p(e,t){var a;try{a=f(t)}catch(n){return Promise.reject(n)}return fetch(e,a)}function h(e){var t=e.subdomain;return\"https://\"+(void 0===t?\"api\":t)+\".line.me/\"+e.pathname}var m={token:h({pathname:\"oauth2/v2.1/token\"}),certs:h({pathname:\"oauth2/v2.1/certs\"}),\"openid-configuration\":h({subdomain:\"access\",pathname:\".well-known/openid-configuration\"}),authorize:h({subdomain:\"access\",pathname:\"liff/v1/authorize\"}),profile:h({pathname:\"v2/profile\"}),message:h({pathname:\"message/v3/share\"}),messageOTT:h({pathname:\"message/v3/multisend?type=ott\"}),friendship:h({pathname:\"friendship/v1/status\"}),shareTargetPicker:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker\"}),shareTargetPickerOtt:h({pathname:\"liff/v2/apps\"}),shareTargetPickerResult:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker/result\"}),apps:h({pathname:\"liff/v2/apps\"}),subWindowGetMSIT:h({pathname:\"liff/v2/sub/msit\"}),subWindowGetMSTByMSIT:h({pathname:\"liff/v2/sub/mst\"}),subWindowSubscribe:h({subdomain:\"liff\",pathname:\"liff/v2/sub/waitResult\"}),subWindowPost:h({pathname:\"liff/v2/sub/result\"}),subWindowGetAppData:h({pathname:\"liff/v2/sub/appData\"}),subWindowGetOrigin:function(e){return h({pathname:\"liff/v2/sub/\"+e+\"/origin\"})},accessTokenVerify:h({pathname:\"oauth2/v2.1/verify\"}),unauthorizedPermissions:h({subdomain:\"liff\",pathname:\"liff/v2/incrementalAgreement/unauthorizedPermissions\"}),permanentLink:h({subdomain:\"liff\",pathname:\"liff/v2/permanentLink\"})};function l(e){return m[e]}function v(e){return c(l(\"accessTokenVerify\")+\"?access_token=\"+encodeURIComponent(e),{headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}})}export{c as fetch,l as getEndPoint,p as requestWithoutErrorHandling,v as verifyAccessToken};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}