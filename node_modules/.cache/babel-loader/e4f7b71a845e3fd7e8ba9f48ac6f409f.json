{"ast":null,"code":"import { __assign as e, __awaiter as t, __generator as n } from \"tslib\";\nimport { createLiffError as i, randomAlphaNumericString as r } from \"@liff/util\";\nimport { SUB_WINDOW_STATUS as s, UNKNOWN as a } from \"@liff/consts\";\n\nvar o = \"liff.subwindow.identifier\",\n    c = \"liff.subwindow.cryptokey\",\n    d = e(e({}, s), {\n  GET_DATA: \"getData\",\n  SET_DATA: \"setData\",\n  NOT_FOUND: \"notFound\",\n  TEARDOWN: \"teardown\"\n}),\n    u = {\n  BROADCAST: \"broadcast\",\n  COMMAND: \"command\"\n},\n    f = {\n  MAIN: \"main\",\n  SUB: \"sub\"\n},\n    l = \"__liff_message_bus__\",\n    h = \"bFSQbce18HC7UXe-lS_mgg\",\n    v = function (e) {\n  return t(void 0, void 0, void 0, function () {\n    var t;\n    return n(this, function (n) {\n      switch (n.label) {\n        case 0:\n          return n.trys.push([0, 2,, 3]), [4, window.crypto.subtle.importKey(\"jwk\", {\n            kty: \"oct\",\n            k: e,\n            alg: \"A128GCM\",\n            ext: !0\n          }, {\n            name: \"AES-GCM\"\n          }, !1, [\"encrypt\", \"decrypt\"])];\n\n        case 1:\n          return [2, n.sent()];\n\n        case 2:\n          throw t = n.sent(), i(a, t);\n\n        case 3:\n          return [2];\n      }\n    });\n  });\n},\n    p = function (e, r, s) {\n  return t(void 0, void 0, void 0, function () {\n    var t, o, c, d;\n    return n(this, function (n) {\n      switch (n.label) {\n        case 0:\n          return n.trys.push([0, 3,, 4]), t = new TextEncoder().encode(e), [4, v(r)];\n\n        case 1:\n          return o = n.sent(), [4, window.crypto.subtle.encrypt({\n            name: \"AES-GCM\",\n            iv: t\n          }, o, new TextEncoder().encode(s))];\n\n        case 2:\n          return c = n.sent(), [2, btoa(new Uint8Array(c).reduce(function (e, t) {\n            return e + String.fromCharCode(t);\n          }, \"\"))];\n\n        case 3:\n          throw d = n.sent(), i(a, d);\n\n        case 4:\n          return [2];\n      }\n    });\n  });\n},\n    m = function (e, r, s) {\n  return t(void 0, void 0, void 0, function () {\n    var t, o, c, d, u, f, l;\n    return n(this, function (n) {\n      switch (n.label) {\n        case 0:\n          return n.trys.push([0, 3,, 4]), t = new TextEncoder().encode(e), [4, v(r)];\n\n        case 1:\n          for (o = n.sent(), c = atob(s), d = new Uint8Array(c.length), u = 0; u < c.length; u++) d[u] = c.charCodeAt(u);\n\n          return [4, window.crypto.subtle.decrypt({\n            name: \"AES-GCM\",\n            iv: t\n          }, o, d.buffer)];\n\n        case 2:\n          return f = n.sent(), [2, new TextDecoder().decode(new Uint8Array(f))];\n\n        case 3:\n          throw l = n.sent(), i(a, l);\n\n        case 4:\n          return [2];\n      }\n    });\n  });\n},\n    w = function (e, t) {\n  return y(e) === y(t);\n},\n    y = function (e) {\n  return e.identifier + \"-\" + e.action + \"-\" + e.timestamp;\n},\n    g = function (e) {\n  return Object.keys(s).map(function (e) {\n    return s[e];\n  }).includes(e) ? u.BROADCAST : u.COMMAND;\n};\n\nfunction b() {\n  var e = document.createElement(\"form\");\n  e.method = \"POST\", e.action = \"$MESSAGE_HANDLER_URL\";\n  var t = document.createElement(\"input\");\n  t.type = \"hidden\", t.name = \"identifier\", t.value = \"$IDENTIFIER\", e.appendChild(t), document.body.appendChild(e), e.submit();\n}\n\nvar E = function (s) {\n  var o = this;\n  void 0 === s && (s = f.MAIN), this.identification = {\n    identifier: \"\",\n    cryptoKey: \"\"\n  }, this.messageHandlerInstance = null, this.listeners = new Map(), this.sentMessages = [], this.generateIdentification = function () {\n    return t(o, void 0, void 0, function () {\n      var e, s, o, d, u;\n      return n(this, function (l) {\n        switch (l.label) {\n          case 0:\n            return e = new URLSearchParams(window.location.search), s = function (t) {\n              var n = e.get(\"liff.state\");\n              return n ? new URLSearchParams(n).get(t) : null;\n            }, o = this, u = {\n              identifier: this.windowType === f.MAIN ? r(12) : e.get(\"liff.subwindow.identifier\") || s(\"liff.subwindow.identifier\") || \"\"\n            }, this.windowType !== f.MAIN ? [3, 2] : [4, t(void 0, void 0, void 0, function () {\n              var e, t, r;\n              return n(this, function (n) {\n                switch (n.label) {\n                  case 0:\n                    return n.trys.push([0, 3,, 4]), [4, window.crypto.subtle.generateKey({\n                      name: \"AES-GCM\",\n                      length: 128\n                    }, !0, [\"encrypt\", \"decrypt\"])];\n\n                  case 1:\n                    return e = n.sent(), [4, window.crypto.subtle.exportKey(\"jwk\", e)];\n\n                  case 2:\n                    if (!(t = n.sent()) || !t.k) throw i(a, \"failed to generate key\");\n                    return [2, t.k];\n\n                  case 3:\n                    throw r = n.sent(), i(a, r);\n\n                  case 4:\n                    return [2];\n                }\n              });\n            })];\n\n          case 1:\n            return d = l.sent(), [3, 3];\n\n          case 2:\n            d = e.get(c) || s(c) || \"\", l.label = 3;\n\n          case 3:\n            return o.identification = (u.cryptoKey = d, u), [2];\n        }\n      });\n    });\n  }, this.hasIdentification = function () {\n    var e = o.identification,\n        t = e.identifier,\n        n = e.cryptoKey;\n    return \"string\" == typeof t && \"string\" == typeof n && t.length > 0 && n.length > 0;\n  }, this.isReady = function () {\n    return o.hasIdentification() && !!o.messageHandlerInstance;\n  }, this.setup = function () {\n    return t(o, void 0, void 0, function () {\n      var e,\n          t,\n          r,\n          s,\n          o,\n          c = this;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return this.messageHandlerInstance ? [2] : [4, this.generateIdentification()];\n\n          case 1:\n            if (n.sent(), !(e = this.identification.identifier)) return [2];\n            if (t = /^[a-zA-Z0-9]+$/gm, !e.match(t)) throw i(a, \"Invalid identifier\");\n            return (r = document.createElement(\"iframe\")).style.display = \"none\", r.src = \"about:blank\", document.body.appendChild(r), null === (o = null == r ? void 0 : r.contentWindow) || void 0 === o || o.window.eval(\"(\" + b.toString().replace(\"$MESSAGE_HANDLER_URL\", \"https://liff-subwindow.line.me/liff/v2/sub/messageHandler\").replace(\"$IDENTIFIER\", e.split(\"'\")[0]) + \")()\"), s = \"iframe-\" + e + \"-ready\", [4, new Promise(function (e) {\n              var t = function (n) {\n                n.data[s] && (c.messageHandlerInstance = r, window.addEventListener(\"message\", c.proxyToListeners), e(), document.removeEventListener(\"message\", t));\n              };\n\n              window.addEventListener(\"message\", t);\n            })];\n\n          case 2:\n            return [2, n.sent()];\n        }\n      });\n    });\n  }, this.teardown = function () {\n    return t(o, void 0, void 0, function () {\n      var e, t;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return this.isReady() ? [4, this.send({\n              eventName: d.TEARDOWN\n            })] : [3, 2];\n\n          case 1:\n            n.sent(), window.removeEventListener(\"message\", this.proxyToListeners), this.listeners.clear(), null === (t = null === (e = this.messageHandlerInstance) || void 0 === e ? void 0 : e.parentNode) || void 0 === t || t.removeChild(this.messageHandlerInstance), this.messageHandlerInstance = null, n.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, this.listen = function (e) {\n    o.listeners.set(e, e);\n  }, this.listenRepliedEvent = function (e, t) {\n    var n = function (i) {\n      i.replyTarget && w(i.replyTarget, e) && (t(i), o.listeners.delete(n));\n    };\n\n    o.listeners.set(n, n);\n  }, this.send = function (e) {\n    return t(o, void 0, void 0, function () {\n      var t,\n          r,\n          s,\n          a,\n          o = this;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            if (!this.isReady()) throw i(\"message bus is not ready to send message\");\n            return r = {\n              action: g(e.eventName),\n              identifier: this.identification.identifier || \"\",\n              timestamp: new Date().getTime()\n            }, [4, this.getEncryptedContext(e)];\n\n          case 1:\n            return r.context = n.sent(), t = r, null === (a = null === (s = this.messageHandlerInstance) || void 0 === s ? void 0 : s.contentWindow) || void 0 === a || a.postMessage({\n              messageBusEvent: t\n            }, \"*\"), this.sentMessages.push(y(t)), [4, new Promise(function (e) {\n              o.listenRepliedEvent(t, function (t) {\n                e(t.context);\n              });\n            })];\n\n          case 2:\n            return [2, n.sent()];\n        }\n      });\n    });\n  }, this.reply = function (e, r) {\n    return t(o, void 0, void 0, function () {\n      var t, s, o, c;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            if (!this.isReady()) throw i(\"message bus is not ready to send message\");\n            if (!e.identifier || !e.timestamp) throw i(a, \"target message is not valid\");\n            return s = {\n              action: u.BROADCAST\n            }, [4, this.getEncryptedContext(r)];\n\n          case 1:\n            return s.context = n.sent(), s.identifier = this.identification.identifier || \"\", s.timestamp = new Date().getTime(), s.replyTarget = {\n              action: e.action,\n              identifier: e.identifier,\n              timestamp: e.timestamp\n            }, t = s, null === (c = null === (o = this.messageHandlerInstance) || void 0 === o ? void 0 : o.contentWindow) || void 0 === c || c.postMessage({\n              messageBusEvent: t\n            }, \"*\"), this.sentMessages.push(y(t)), [2];\n        }\n      });\n    });\n  }, this.setData = function (e, t) {\n    void 0 === e && (e = \"appData\"), o.send({\n      eventName: d.SET_DATA,\n      key: e,\n      data: t\n    });\n  }, this.getData = function (e) {\n    return void 0 === e && (e = \"appData\"), t(o, void 0, void 0, function () {\n      return n(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, this.send({\n              eventName: d.GET_DATA,\n              key: e\n            })];\n\n          case 1:\n            return [2, t.sent()];\n        }\n      });\n    });\n  }, this.proxyToListeners = function (i) {\n    return t(o, void 0, void 0, function () {\n      var r,\n          s = this;\n      return n(this, function (a) {\n        return (r = i.data.messageBusEvent) ? (this.sentMessages.includes(y(r)) || r.identifier !== this.identification.identifier || r.action !== u.BROADCAST && !r.replyTarget || this.listeners.forEach(function (i) {\n          return t(s, void 0, void 0, function () {\n            var t, s, a;\n            return n(this, function (n) {\n              switch (n.label) {\n                case 0:\n                  return t = i, s = [e({}, r)], a = {}, [4, this.getDecryptedContext(r.context)];\n\n                case 1:\n                  return t.apply(void 0, [e.apply(void 0, s.concat([(a.context = n.sent(), a)]))]), [2];\n              }\n            });\n          });\n        }), [2]) : [2];\n      });\n    });\n  }, this.getEncryptedContext = function (e) {\n    return t(o, void 0, void 0, function () {\n      var t, i, r, s, a, o, c;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return t = this.identification, i = t.identifier, r = t.cryptoKey, a = (s = JSON).stringify, c = {\n              eventName: e.eventName,\n              key: e.key ? e.key : void 0\n            }, e.data ? [4, p(i, r, JSON.stringify(e.data))] : [3, 2];\n\n          case 1:\n            return o = n.sent(), [3, 3];\n\n          case 2:\n            o = void 0, n.label = 3;\n\n          case 3:\n            return [2, a.apply(s, [(c.data = o, c)])];\n        }\n      });\n    });\n  }, this.getDecryptedContext = function (i) {\n    return t(o, void 0, void 0, function () {\n      var t, r, s, a, o, c, d, u;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return t = this.identification, r = t.identifier, s = t.cryptoKey, (a = JSON.parse(i)).data && \"string\" == typeof a.data ? (u = (d = JSON).parse, [4, m(r, s, a.data)]) : [3, 2];\n\n          case 1:\n            return c = u.apply(d, [n.sent()]), [3, 3];\n\n          case 2:\n            c = void 0, n.label = 3;\n\n          case 3:\n            return o = c, [2, e(e({}, a), {\n              data: o\n            })];\n        }\n      });\n    });\n  }, this.windowType = s;\n};\n\nexport default E;\nexport { u as ACTION, c as CRYPTO_KEY, d as EVENT_NAME, l as GLOBAL_MESSAGE_BUS_IDENTIFIER, h as GLOBAL_MESSAGE_BUS_KEY, o as IDENTIFIER_KEY, f as WINDOW, g as getEventAction, y as getUniqId, w as isSameEvent, b as loadMessageHandlerPage };","map":{"version":3,"names":["__assign","e","__awaiter","t","__generator","n","createLiffError","i","randomAlphaNumericString","r","SUB_WINDOW_STATUS","s","UNKNOWN","a","o","c","d","GET_DATA","SET_DATA","NOT_FOUND","TEARDOWN","u","BROADCAST","COMMAND","f","MAIN","SUB","l","h","v","label","trys","push","window","crypto","subtle","importKey","kty","k","alg","ext","name","sent","p","TextEncoder","encode","encrypt","iv","btoa","Uint8Array","reduce","String","fromCharCode","m","atob","length","charCodeAt","decrypt","buffer","TextDecoder","decode","w","y","identifier","action","timestamp","g","Object","keys","map","includes","b","document","createElement","method","type","value","appendChild","body","submit","E","identification","cryptoKey","messageHandlerInstance","listeners","Map","sentMessages","generateIdentification","URLSearchParams","location","search","get","windowType","generateKey","exportKey","hasIdentification","isReady","setup","match","style","display","src","contentWindow","eval","toString","replace","split","Promise","data","addEventListener","proxyToListeners","removeEventListener","teardown","send","eventName","clear","parentNode","removeChild","listen","set","listenRepliedEvent","replyTarget","delete","Date","getTime","getEncryptedContext","context","postMessage","messageBusEvent","reply","setData","key","getData","forEach","getDecryptedContext","apply","concat","JSON","stringify","parse","ACTION","CRYPTO_KEY","EVENT_NAME","GLOBAL_MESSAGE_BUS_IDENTIFIER","GLOBAL_MESSAGE_BUS_KEY","IDENTIFIER_KEY","WINDOW","getEventAction","getUniqId","isSameEvent","loadMessageHandlerPage"],"sources":["C:/Users/ASUS/Desktop/linetest/node_modules/@liff/message-bus/lib/index.es.js"],"sourcesContent":["import{__assign as e,__awaiter as t,__generator as n}from\"tslib\";import{createLiffError as i,randomAlphaNumericString as r}from\"@liff/util\";import{SUB_WINDOW_STATUS as s,UNKNOWN as a}from\"@liff/consts\";var o=\"liff.subwindow.identifier\",c=\"liff.subwindow.cryptokey\",d=e(e({},s),{GET_DATA:\"getData\",SET_DATA:\"setData\",NOT_FOUND:\"notFound\",TEARDOWN:\"teardown\"}),u={BROADCAST:\"broadcast\",COMMAND:\"command\"},f={MAIN:\"main\",SUB:\"sub\"},l=\"__liff_message_bus__\",h=\"bFSQbce18HC7UXe-lS_mgg\",v=function(e){return t(void 0,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey(\"jwk\",{kty:\"oct\",k:e,alg:\"A128GCM\",ext:!0},{name:\"AES-GCM\"},!1,[\"encrypt\",\"decrypt\"])];case 1:return[2,n.sent()];case 2:throw t=n.sent(),i(a,t);case 3:return[2]}}))}))},p=function(e,r,s){return t(void 0,void 0,void 0,(function(){var t,o,c,d;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=(new TextEncoder).encode(e),[4,v(r)];case 1:return o=n.sent(),[4,window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:t},o,(new TextEncoder).encode(s))];case 2:return c=n.sent(),[2,btoa(new Uint8Array(c).reduce((function(e,t){return e+String.fromCharCode(t)}),\"\"))];case 3:throw d=n.sent(),i(a,d);case 4:return[2]}}))}))},m=function(e,r,s){return t(void 0,void 0,void 0,(function(){var t,o,c,d,u,f,l;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=(new TextEncoder).encode(e),[4,v(r)];case 1:for(o=n.sent(),c=atob(s),d=new Uint8Array(c.length),u=0;u<c.length;u++)d[u]=c.charCodeAt(u);return[4,window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:t},o,d.buffer)];case 2:return f=n.sent(),[2,(new TextDecoder).decode(new Uint8Array(f))];case 3:throw l=n.sent(),i(a,l);case 4:return[2]}}))}))},w=function(e,t){return y(e)===y(t)},y=function(e){return e.identifier+\"-\"+e.action+\"-\"+e.timestamp},g=function(e){return Object.keys(s).map((function(e){return s[e]})).includes(e)?u.BROADCAST:u.COMMAND};function b(){var e=document.createElement(\"form\");e.method=\"POST\",e.action=\"$MESSAGE_HANDLER_URL\";var t=document.createElement(\"input\");t.type=\"hidden\",t.name=\"identifier\",t.value=\"$IDENTIFIER\",e.appendChild(t),document.body.appendChild(e),e.submit()}var E=function(s){var o=this;void 0===s&&(s=f.MAIN),this.identification={identifier:\"\",cryptoKey:\"\"},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return t(o,void 0,void 0,(function(){var e,s,o,d,u;return n(this,(function(l){switch(l.label){case 0:return e=new URLSearchParams(window.location.search),s=function(t){var n=e.get(\"liff.state\");return n?new URLSearchParams(n).get(t):null},o=this,u={identifier:this.windowType===f.MAIN?r(12):e.get(\"liff.subwindow.identifier\")||s(\"liff.subwindow.identifier\")||\"\"},this.windowType!==f.MAIN?[3,2]:[4,t(void 0,void 0,void 0,(function(){var e,t,r;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:\"AES-GCM\",length:128},!0,[\"encrypt\",\"decrypt\"])];case 1:return e=n.sent(),[4,window.crypto.subtle.exportKey(\"jwk\",e)];case 2:if(!(t=n.sent())||!t.k)throw i(a,\"failed to generate key\");return[2,t.k];case 3:throw r=n.sent(),i(a,r);case 4:return[2]}}))}))];case 1:return d=l.sent(),[3,3];case 2:d=e.get(c)||s(c)||\"\",l.label=3;case 3:return o.identification=(u.cryptoKey=d,u),[2]}}))}))},this.hasIdentification=function(){var e=o.identification,t=e.identifier,n=e.cryptoKey;return\"string\"==typeof t&&\"string\"==typeof n&&t.length>0&&n.length>0},this.isReady=function(){return o.hasIdentification()&&!!o.messageHandlerInstance},this.setup=function(){return t(o,void 0,void 0,(function(){var e,t,r,s,o,c=this;return n(this,(function(n){switch(n.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(n.sent(),!(e=this.identification.identifier))return[2];if(t=/^[a-zA-Z0-9]+$/gm,!e.match(t))throw i(a,\"Invalid identifier\");return(r=document.createElement(\"iframe\")).style.display=\"none\",r.src=\"about:blank\",document.body.appendChild(r),null===(o=null==r?void 0:r.contentWindow)||void 0===o||o.window.eval(\"(\"+b.toString().replace(\"$MESSAGE_HANDLER_URL\",\"https://liff-subwindow.line.me/liff/v2/sub/messageHandler\").replace(\"$IDENTIFIER\",e.split(\"'\")[0])+\")()\"),s=\"iframe-\"+e+\"-ready\",[4,new Promise((function(e){var t=function(n){n.data[s]&&(c.messageHandlerInstance=r,window.addEventListener(\"message\",c.proxyToListeners),e(),document.removeEventListener(\"message\",t))};window.addEventListener(\"message\",t)}))];case 2:return[2,n.sent()]}}))}))},this.teardown=function(){return t(o,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:return this.isReady()?[4,this.send({eventName:d.TEARDOWN})]:[3,2];case 1:n.sent(),window.removeEventListener(\"message\",this.proxyToListeners),this.listeners.clear(),null===(t=null===(e=this.messageHandlerInstance)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,n.label=2;case 2:return[2]}}))}))},this.listen=function(e){o.listeners.set(e,e)},this.listenRepliedEvent=function(e,t){var n=function(i){i.replyTarget&&w(i.replyTarget,e)&&(t(i),o.listeners.delete(n))};o.listeners.set(n,n)},this.send=function(e){return t(o,void 0,void 0,(function(){var t,r,s,a,o=this;return n(this,(function(n){switch(n.label){case 0:if(!this.isReady())throw i(\"message bus is not ready to send message\");return r={action:g(e.eventName),identifier:this.identification.identifier||\"\",timestamp:(new Date).getTime()},[4,this.getEncryptedContext(e)];case 1:return r.context=n.sent(),t=r,null===(a=null===(s=this.messageHandlerInstance)||void 0===s?void 0:s.contentWindow)||void 0===a||a.postMessage({messageBusEvent:t},\"*\"),this.sentMessages.push(y(t)),[4,new Promise((function(e){o.listenRepliedEvent(t,(function(t){e(t.context)}))}))];case 2:return[2,n.sent()]}}))}))},this.reply=function(e,r){return t(o,void 0,void 0,(function(){var t,s,o,c;return n(this,(function(n){switch(n.label){case 0:if(!this.isReady())throw i(\"message bus is not ready to send message\");if(!e.identifier||!e.timestamp)throw i(a,\"target message is not valid\");return s={action:u.BROADCAST},[4,this.getEncryptedContext(r)];case 1:return s.context=n.sent(),s.identifier=this.identification.identifier||\"\",s.timestamp=(new Date).getTime(),s.replyTarget={action:e.action,identifier:e.identifier,timestamp:e.timestamp},t=s,null===(c=null===(o=this.messageHandlerInstance)||void 0===o?void 0:o.contentWindow)||void 0===c||c.postMessage({messageBusEvent:t},\"*\"),this.sentMessages.push(y(t)),[2]}}))}))},this.setData=function(e,t){void 0===e&&(e=\"appData\"),o.send({eventName:d.SET_DATA,key:e,data:t})},this.getData=function(e){return void 0===e&&(e=\"appData\"),t(o,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.send({eventName:d.GET_DATA,key:e})];case 1:return[2,t.sent()]}}))}))},this.proxyToListeners=function(i){return t(o,void 0,void 0,(function(){var r,s=this;return n(this,(function(a){return(r=i.data.messageBusEvent)?(this.sentMessages.includes(y(r))||r.identifier!==this.identification.identifier||r.action!==u.BROADCAST&&!r.replyTarget||this.listeners.forEach((function(i){return t(s,void 0,void 0,(function(){var t,s,a;return n(this,(function(n){switch(n.label){case 0:return t=i,s=[e({},r)],a={},[4,this.getDecryptedContext(r.context)];case 1:return t.apply(void 0,[e.apply(void 0,s.concat([(a.context=n.sent(),a)]))]),[2]}}))}))})),[2]):[2]}))}))},this.getEncryptedContext=function(e){return t(o,void 0,void 0,(function(){var t,i,r,s,a,o,c;return n(this,(function(n){switch(n.label){case 0:return t=this.identification,i=t.identifier,r=t.cryptoKey,a=(s=JSON).stringify,c={eventName:e.eventName,key:e.key?e.key:void 0},e.data?[4,p(i,r,JSON.stringify(e.data))]:[3,2];case 1:return o=n.sent(),[3,3];case 2:o=void 0,n.label=3;case 3:return[2,a.apply(s,[(c.data=o,c)])]}}))}))},this.getDecryptedContext=function(i){return t(o,void 0,void 0,(function(){var t,r,s,a,o,c,d,u;return n(this,(function(n){switch(n.label){case 0:return t=this.identification,r=t.identifier,s=t.cryptoKey,(a=JSON.parse(i)).data&&\"string\"==typeof a.data?(u=(d=JSON).parse,[4,m(r,s,a.data)]):[3,2];case 1:return c=u.apply(d,[n.sent()]),[3,3];case 2:c=void 0,n.label=3;case 3:return o=c,[2,e(e({},a),{data:o})]}}))}))},this.windowType=s};export default E;export{u as ACTION,c as CRYPTO_KEY,d as EVENT_NAME,l as GLOBAL_MESSAGE_BUS_IDENTIFIER,h as GLOBAL_MESSAGE_BUS_KEY,o as IDENTIFIER_KEY,f as WINDOW,g as getEventAction,y as getUniqId,w as isSameEvent,b as loadMessageHandlerPage};\n"],"mappings":"AAAA,SAAOA,QAAQ,IAAIC,CAAnB,EAAqBC,SAAS,IAAIC,CAAlC,EAAoCC,WAAW,IAAIC,CAAnD,QAAyD,OAAzD;AAAiE,SAAOC,eAAe,IAAIC,CAA1B,EAA4BC,wBAAwB,IAAIC,CAAxD,QAA8D,YAA9D;AAA2E,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,OAAO,IAAIC,CAAzC,QAA+C,cAA/C;;AAA8D,IAAIC,CAAC,GAAC,2BAAN;AAAA,IAAkCC,CAAC,GAAC,0BAApC;AAAA,IAA+DC,CAAC,GAACf,CAAC,CAACA,CAAC,CAAC,EAAD,EAAIU,CAAJ,CAAF,EAAS;EAACM,QAAQ,EAAC,SAAV;EAAoBC,QAAQ,EAAC,SAA7B;EAAuCC,SAAS,EAAC,UAAjD;EAA4DC,QAAQ,EAAC;AAArE,CAAT,CAAlE;AAAA,IAA6JC,CAAC,GAAC;EAACC,SAAS,EAAC,WAAX;EAAuBC,OAAO,EAAC;AAA/B,CAA/J;AAAA,IAAyMC,CAAC,GAAC;EAACC,IAAI,EAAC,MAAN;EAAaC,GAAG,EAAC;AAAjB,CAA3M;AAAA,IAAmOC,CAAC,GAAC,sBAArO;AAAA,IAA4PC,CAAC,GAAC,wBAA9P;AAAA,IAAuRC,CAAC,GAAC,UAAS5B,CAAT,EAAW;EAAC,OAAOE,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,YAAU;IAAC,IAAIA,CAAJ;IAAM,OAAOE,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;MAAC,QAAOA,CAAC,CAACyB,KAAT;QAAgB,KAAK,CAAL;UAAO,OAAOzB,CAAC,CAAC0B,IAAF,CAAOC,IAAP,CAAY,CAAC,CAAD,EAAG,CAAH,GAAM,CAAN,CAAZ,GAAsB,CAAC,CAAD,EAAGC,MAAM,CAACC,MAAP,CAAcC,MAAd,CAAqBC,SAArB,CAA+B,KAA/B,EAAqC;YAACC,GAAG,EAAC,KAAL;YAAWC,CAAC,EAACrC,CAAb;YAAesC,GAAG,EAAC,SAAnB;YAA6BC,GAAG,EAAC,CAAC;UAAlC,CAArC,EAA0E;YAACC,IAAI,EAAC;UAAN,CAA1E,EAA2F,CAAC,CAA5F,EAA8F,CAAC,SAAD,EAAW,SAAX,CAA9F,CAAH,CAA7B;;QAAsJ,KAAK,CAAL;UAAO,OAAM,CAAC,CAAD,EAAGpC,CAAC,CAACqC,IAAF,EAAH,CAAN;;QAAmB,KAAK,CAAL;UAAO,MAAMvC,CAAC,GAACE,CAAC,CAACqC,IAAF,EAAF,EAAWnC,CAAC,CAACM,CAAD,EAAGV,CAAH,CAAlB;;QAAwB,KAAK,CAAL;UAAO,OAAM,CAAC,CAAD,CAAN;MAA7O;IAAwP,CAA3Q,CAAR;EAAsR,CAA9T,CAAR;AAAyU,CAA9mB;AAAA,IAA+mBwC,CAAC,GAAC,UAAS1C,CAAT,EAAWQ,CAAX,EAAaE,CAAb,EAAe;EAAC,OAAOR,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,YAAU;IAAC,IAAIA,CAAJ,EAAMW,CAAN,EAAQC,CAAR,EAAUC,CAAV;IAAY,OAAOX,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;MAAC,QAAOA,CAAC,CAACyB,KAAT;QAAgB,KAAK,CAAL;UAAO,OAAOzB,CAAC,CAAC0B,IAAF,CAAOC,IAAP,CAAY,CAAC,CAAD,EAAG,CAAH,GAAM,CAAN,CAAZ,GAAsB7B,CAAC,GAAE,IAAIyC,WAAJ,EAAD,CAAkBC,MAAlB,CAAyB5C,CAAzB,CAAxB,EAAoD,CAAC,CAAD,EAAG4B,CAAC,CAACpB,CAAD,CAAJ,CAA3D;;QAAoE,KAAK,CAAL;UAAO,OAAOK,CAAC,GAACT,CAAC,CAACqC,IAAF,EAAF,EAAW,CAAC,CAAD,EAAGT,MAAM,CAACC,MAAP,CAAcC,MAAd,CAAqBW,OAArB,CAA6B;YAACL,IAAI,EAAC,SAAN;YAAgBM,EAAE,EAAC5C;UAAnB,CAA7B,EAAmDW,CAAnD,EAAsD,IAAI8B,WAAJ,EAAD,CAAkBC,MAAlB,CAAyBlC,CAAzB,CAArD,CAAH,CAAlB;;QAAwG,KAAK,CAAL;UAAO,OAAOI,CAAC,GAACV,CAAC,CAACqC,IAAF,EAAF,EAAW,CAAC,CAAD,EAAGM,IAAI,CAAC,IAAIC,UAAJ,CAAelC,CAAf,EAAkBmC,MAAlB,CAA0B,UAASjD,CAAT,EAAWE,CAAX,EAAa;YAAC,OAAOF,CAAC,GAACkD,MAAM,CAACC,YAAP,CAAoBjD,CAApB,CAAT;UAAgC,CAAxE,EAA0E,EAA1E,CAAD,CAAP,CAAlB;;QAA0G,KAAK,CAAL;UAAO,MAAMa,CAAC,GAACX,CAAC,CAACqC,IAAF,EAAF,EAAWnC,CAAC,CAACM,CAAD,EAAGG,CAAH,CAAlB;;QAAwB,KAAK,CAAL;UAAO,OAAM,CAAC,CAAD,CAAN;MAAjW;IAA4W,CAA/X,CAAR;EAA0Y,CAAxb,CAAR;AAAmc,CAApkC;AAAA,IAAqkCqC,CAAC,GAAC,UAASpD,CAAT,EAAWQ,CAAX,EAAaE,CAAb,EAAe;EAAC,OAAOR,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,YAAU;IAAC,IAAIA,CAAJ,EAAMW,CAAN,EAAQC,CAAR,EAAUC,CAAV,EAAYK,CAAZ,EAAcG,CAAd,EAAgBG,CAAhB;IAAkB,OAAOtB,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;MAAC,QAAOA,CAAC,CAACyB,KAAT;QAAgB,KAAK,CAAL;UAAO,OAAOzB,CAAC,CAAC0B,IAAF,CAAOC,IAAP,CAAY,CAAC,CAAD,EAAG,CAAH,GAAM,CAAN,CAAZ,GAAsB7B,CAAC,GAAE,IAAIyC,WAAJ,EAAD,CAAkBC,MAAlB,CAAyB5C,CAAzB,CAAxB,EAAoD,CAAC,CAAD,EAAG4B,CAAC,CAACpB,CAAD,CAAJ,CAA3D;;QAAoE,KAAK,CAAL;UAAO,KAAIK,CAAC,GAACT,CAAC,CAACqC,IAAF,EAAF,EAAW3B,CAAC,GAACuC,IAAI,CAAC3C,CAAD,CAAjB,EAAqBK,CAAC,GAAC,IAAIiC,UAAJ,CAAelC,CAAC,CAACwC,MAAjB,CAAvB,EAAgDlC,CAAC,GAAC,CAAtD,EAAwDA,CAAC,GAACN,CAAC,CAACwC,MAA5D,EAAmElC,CAAC,EAApE,EAAuEL,CAAC,CAACK,CAAD,CAAD,GAAKN,CAAC,CAACyC,UAAF,CAAanC,CAAb,CAAL;;UAAqB,OAAM,CAAC,CAAD,EAAGY,MAAM,CAACC,MAAP,CAAcC,MAAd,CAAqBsB,OAArB,CAA6B;YAAChB,IAAI,EAAC,SAAN;YAAgBM,EAAE,EAAC5C;UAAnB,CAA7B,EAAmDW,CAAnD,EAAqDE,CAAC,CAAC0C,MAAvD,CAAH,CAAN;;QAAyE,KAAK,CAAL;UAAO,OAAOlC,CAAC,GAACnB,CAAC,CAACqC,IAAF,EAAF,EAAW,CAAC,CAAD,EAAI,IAAIiB,WAAJ,EAAD,CAAkBC,MAAlB,CAAyB,IAAIX,UAAJ,CAAezB,CAAf,CAAzB,CAAH,CAAlB;;QAAkE,KAAK,CAAL;UAAO,MAAMG,CAAC,GAACtB,CAAC,CAACqC,IAAF,EAAF,EAAWnC,CAAC,CAACM,CAAD,EAAGc,CAAH,CAAlB;;QAAwB,KAAK,CAAL;UAAO,OAAM,CAAC,CAAD,CAAN;MAAtX;IAAiY,CAApZ,CAAR;EAA+Z,CAAnd,CAAR;AAA8d,CAArjD;AAAA,IAAsjDkC,CAAC,GAAC,UAAS5D,CAAT,EAAWE,CAAX,EAAa;EAAC,OAAO2D,CAAC,CAAC7D,CAAD,CAAD,KAAO6D,CAAC,CAAC3D,CAAD,CAAf;AAAmB,CAAzlD;AAAA,IAA0lD2D,CAAC,GAAC,UAAS7D,CAAT,EAAW;EAAC,OAAOA,CAAC,CAAC8D,UAAF,GAAa,GAAb,GAAiB9D,CAAC,CAAC+D,MAAnB,GAA0B,GAA1B,GAA8B/D,CAAC,CAACgE,SAAvC;AAAiD,CAAzpD;AAAA,IAA0pDC,CAAC,GAAC,UAASjE,CAAT,EAAW;EAAC,OAAOkE,MAAM,CAACC,IAAP,CAAYzD,CAAZ,EAAe0D,GAAf,CAAoB,UAASpE,CAAT,EAAW;IAAC,OAAOU,CAAC,CAACV,CAAD,CAAR;EAAY,CAA5C,EAA+CqE,QAA/C,CAAwDrE,CAAxD,IAA2DoB,CAAC,CAACC,SAA7D,GAAuED,CAAC,CAACE,OAAhF;AAAwF,CAAhwD;;AAAiwD,SAASgD,CAAT,GAAY;EAAC,IAAItE,CAAC,GAACuE,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAN;EAAqCxE,CAAC,CAACyE,MAAF,GAAS,MAAT,EAAgBzE,CAAC,CAAC+D,MAAF,GAAS,sBAAzB;EAAgD,IAAI7D,CAAC,GAACqE,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAN;EAAsCtE,CAAC,CAACwE,IAAF,GAAO,QAAP,EAAgBxE,CAAC,CAACsC,IAAF,GAAO,YAAvB,EAAoCtC,CAAC,CAACyE,KAAF,GAAQ,aAA5C,EAA0D3E,CAAC,CAAC4E,WAAF,CAAc1E,CAAd,CAA1D,EAA2EqE,QAAQ,CAACM,IAAT,CAAcD,WAAd,CAA0B5E,CAA1B,CAA3E,EAAwGA,CAAC,CAAC8E,MAAF,EAAxG;AAAmH;;AAAA,IAAIC,CAAC,GAAC,UAASrE,CAAT,EAAW;EAAC,IAAIG,CAAC,GAAC,IAAN;EAAW,KAAK,CAAL,KAASH,CAAT,KAAaA,CAAC,GAACa,CAAC,CAACC,IAAjB,GAAuB,KAAKwD,cAAL,GAAoB;IAAClB,UAAU,EAAC,EAAZ;IAAemB,SAAS,EAAC;EAAzB,CAA3C,EAAwE,KAAKC,sBAAL,GAA4B,IAApG,EAAyG,KAAKC,SAAL,GAAe,IAAIC,GAAJ,EAAxH,EAAgI,KAAKC,YAAL,GAAkB,EAAlJ,EAAqJ,KAAKC,sBAAL,GAA4B,YAAU;IAAC,OAAOpF,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIb,CAAJ,EAAMU,CAAN,EAAQG,CAAR,EAAUE,CAAV,EAAYK,CAAZ;MAAc,OAAOhB,CAAC,CAAC,IAAD,EAAO,UAASsB,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACG,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAO7B,CAAC,GAAC,IAAIuF,eAAJ,CAAoBvD,MAAM,CAACwD,QAAP,CAAgBC,MAApC,CAAF,EAA8C/E,CAAC,GAAC,UAASR,CAAT,EAAW;cAAC,IAAIE,CAAC,GAACJ,CAAC,CAAC0F,GAAF,CAAM,YAAN,CAAN;cAA0B,OAAOtF,CAAC,GAAC,IAAImF,eAAJ,CAAoBnF,CAApB,EAAuBsF,GAAvB,CAA2BxF,CAA3B,CAAD,GAA+B,IAAvC;YAA4C,CAAlI,EAAmIW,CAAC,GAAC,IAArI,EAA0IO,CAAC,GAAC;cAAC0C,UAAU,EAAC,KAAK6B,UAAL,KAAkBpE,CAAC,CAACC,IAApB,GAAyBhB,CAAC,CAAC,EAAD,CAA1B,GAA+BR,CAAC,CAAC0F,GAAF,CAAM,2BAAN,KAAoChF,CAAC,CAAC,2BAAD,CAArC,IAAoE;YAA/G,CAA5I,EAA+P,KAAKiF,UAAL,KAAkBpE,CAAC,CAACC,IAApB,GAAyB,CAAC,CAAD,EAAG,CAAH,CAAzB,GAA+B,CAAC,CAAD,EAAGtB,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,YAAU;cAAC,IAAIF,CAAJ,EAAME,CAAN,EAAQM,CAAR;cAAU,OAAOJ,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;gBAAC,QAAOA,CAAC,CAACyB,KAAT;kBAAgB,KAAK,CAAL;oBAAO,OAAOzB,CAAC,CAAC0B,IAAF,CAAOC,IAAP,CAAY,CAAC,CAAD,EAAG,CAAH,GAAM,CAAN,CAAZ,GAAsB,CAAC,CAAD,EAAGC,MAAM,CAACC,MAAP,CAAcC,MAAd,CAAqB0D,WAArB,CAAiC;sBAACpD,IAAI,EAAC,SAAN;sBAAgBc,MAAM,EAAC;oBAAvB,CAAjC,EAA6D,CAAC,CAA9D,EAAgE,CAAC,SAAD,EAAW,SAAX,CAAhE,CAAH,CAA7B;;kBAAwH,KAAK,CAAL;oBAAO,OAAOtD,CAAC,GAACI,CAAC,CAACqC,IAAF,EAAF,EAAW,CAAC,CAAD,EAAGT,MAAM,CAACC,MAAP,CAAcC,MAAd,CAAqB2D,SAArB,CAA+B,KAA/B,EAAqC7F,CAArC,CAAH,CAAlB;;kBAA8D,KAAK,CAAL;oBAAO,IAAG,EAAEE,CAAC,GAACE,CAAC,CAACqC,IAAF,EAAJ,KAAe,CAACvC,CAAC,CAACmC,CAArB,EAAuB,MAAM/B,CAAC,CAACM,CAAD,EAAG,wBAAH,CAAP;oBAAoC,OAAM,CAAC,CAAD,EAAGV,CAAC,CAACmC,CAAL,CAAN;;kBAAc,KAAK,CAAL;oBAAO,MAAM7B,CAAC,GAACJ,CAAC,CAACqC,IAAF,EAAF,EAAWnC,CAAC,CAACM,CAAD,EAAGJ,CAAH,CAAlB;;kBAAwB,KAAK,CAAL;oBAAO,OAAM,CAAC,CAAD,CAAN;gBAA1U;cAAqV,CAAxW,CAAR;YAAmX,CAA/Z,CAAJ,CAArS;;UAA4sB,KAAK,CAAL;YAAO,OAAOO,CAAC,GAACW,CAAC,CAACe,IAAF,EAAF,EAAW,CAAC,CAAD,EAAG,CAAH,CAAlB;;UAAwB,KAAK,CAAL;YAAO1B,CAAC,GAACf,CAAC,CAAC0F,GAAF,CAAM5E,CAAN,KAAUJ,CAAC,CAACI,CAAD,CAAX,IAAgB,EAAlB,EAAqBY,CAAC,CAACG,KAAF,GAAQ,CAA7B;;UAA+B,KAAK,CAAL;YAAO,OAAOhB,CAAC,CAACmE,cAAF,IAAkB5D,CAAC,CAAC6D,SAAF,GAAYlE,CAAZ,EAAcK,CAAhC,GAAmC,CAAC,CAAD,CAA1C;QAA/yB;MAA81B,CAAj3B,CAAR;IAA43B,CAAv6B,CAAR;EAAk7B,CAA9mC,EAA+mC,KAAK0E,iBAAL,GAAuB,YAAU;IAAC,IAAI9F,CAAC,GAACa,CAAC,CAACmE,cAAR;IAAA,IAAuB9E,CAAC,GAACF,CAAC,CAAC8D,UAA3B;IAAA,IAAsC1D,CAAC,GAACJ,CAAC,CAACiF,SAA1C;IAAoD,OAAM,YAAU,OAAO/E,CAAjB,IAAoB,YAAU,OAAOE,CAArC,IAAwCF,CAAC,CAACoD,MAAF,GAAS,CAAjD,IAAoDlD,CAAC,CAACkD,MAAF,GAAS,CAAnE;EAAqE,CAA1wC,EAA2wC,KAAKyC,OAAL,GAAa,YAAU;IAAC,OAAOlF,CAAC,CAACiF,iBAAF,MAAuB,CAAC,CAACjF,CAAC,CAACqE,sBAAlC;EAAyD,CAA51C,EAA61C,KAAKc,KAAL,GAAW,YAAU;IAAC,OAAO9F,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIb,CAAJ;MAAA,IAAME,CAAN;MAAA,IAAQM,CAAR;MAAA,IAAUE,CAAV;MAAA,IAAYG,CAAZ;MAAA,IAAcC,CAAC,GAAC,IAAhB;MAAqB,OAAOV,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAO,KAAKqD,sBAAL,GAA4B,CAAC,CAAD,CAA5B,GAAgC,CAAC,CAAD,EAAG,KAAKI,sBAAL,EAAH,CAAvC;;UAAyE,KAAK,CAAL;YAAO,IAAGlF,CAAC,CAACqC,IAAF,IAAS,EAAEzC,CAAC,GAAC,KAAKgF,cAAL,CAAoBlB,UAAxB,CAAZ,EAAgD,OAAM,CAAC,CAAD,CAAN;YAAU,IAAG5D,CAAC,GAAC,kBAAF,EAAqB,CAACF,CAAC,CAACiG,KAAF,CAAQ/F,CAAR,CAAzB,EAAoC,MAAMI,CAAC,CAACM,CAAD,EAAG,oBAAH,CAAP;YAAgC,OAAM,CAACJ,CAAC,GAAC+D,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAH,EAAqC0B,KAArC,CAA2CC,OAA3C,GAAmD,MAAnD,EAA0D3F,CAAC,CAAC4F,GAAF,GAAM,aAAhE,EAA8E7B,QAAQ,CAACM,IAAT,CAAcD,WAAd,CAA0BpE,CAA1B,CAA9E,EAA2G,UAAQK,CAAC,GAAC,QAAML,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC6F,aAA3B,KAA2C,KAAK,CAAL,KAASxF,CAApD,IAAuDA,CAAC,CAACmB,MAAF,CAASsE,IAAT,CAAc,MAAIhC,CAAC,CAACiC,QAAF,GAAaC,OAAb,CAAqB,sBAArB,EAA4C,2DAA5C,EAAyGA,OAAzG,CAAiH,aAAjH,EAA+HxG,CAAC,CAACyG,KAAF,CAAQ,GAAR,EAAa,CAAb,CAA/H,CAAJ,GAAoJ,KAAlK,CAAlK,EAA2U/F,CAAC,GAAC,YAAUV,CAAV,GAAY,QAAzV,EAAkW,CAAC,CAAD,EAAG,IAAI0G,OAAJ,CAAa,UAAS1G,CAAT,EAAW;cAAC,IAAIE,CAAC,GAAC,UAASE,CAAT,EAAW;gBAACA,CAAC,CAACuG,IAAF,CAAOjG,CAAP,MAAYI,CAAC,CAACoE,sBAAF,GAAyB1E,CAAzB,EAA2BwB,MAAM,CAAC4E,gBAAP,CAAwB,SAAxB,EAAkC9F,CAAC,CAAC+F,gBAApC,CAA3B,EAAiF7G,CAAC,EAAlF,EAAqFuE,QAAQ,CAACuC,mBAAT,CAA6B,SAA7B,EAAuC5G,CAAvC,CAAjG;cAA4I,CAA9J;;cAA+J8B,MAAM,CAAC4E,gBAAP,CAAwB,SAAxB,EAAkC1G,CAAlC;YAAqC,CAA7N,CAAH,CAAxW;;UAA4kB,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,EAAGE,CAAC,CAACqC,IAAF,EAAH,CAAN;QAAxzB;MAA40B,CAA/1B,CAAR;IAA02B,CAA55B,CAAR;EAAu6B,CAA1xE,EAA2xE,KAAKsE,QAAL,GAAc,YAAU;IAAC,OAAO7G,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIb,CAAJ,EAAME,CAAN;MAAQ,OAAOE,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAO,KAAKkE,OAAL,KAAe,CAAC,CAAD,EAAG,KAAKiB,IAAL,CAAU;cAACC,SAAS,EAAClG,CAAC,CAACI;YAAb,CAAV,CAAH,CAAf,GAAqD,CAAC,CAAD,EAAG,CAAH,CAA5D;;UAAkE,KAAK,CAAL;YAAOf,CAAC,CAACqC,IAAF,IAAST,MAAM,CAAC8E,mBAAP,CAA2B,SAA3B,EAAqC,KAAKD,gBAA1C,CAAT,EAAqE,KAAK1B,SAAL,CAAe+B,KAAf,EAArE,EAA4F,UAAQhH,CAAC,GAAC,UAAQF,CAAC,GAAC,KAAKkF,sBAAf,KAAwC,KAAK,CAAL,KAASlF,CAAjD,GAAmD,KAAK,CAAxD,GAA0DA,CAAC,CAACmH,UAAtE,KAAmF,KAAK,CAAL,KAASjH,CAA5F,IAA+FA,CAAC,CAACkH,WAAF,CAAc,KAAKlC,sBAAnB,CAA3L,EAAsO,KAAKA,sBAAL,GAA4B,IAAlQ,EAAuQ9E,CAAC,CAACyB,KAAF,GAAQ,CAA/Q;;UAAiR,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,CAAN;QAAxX;MAAmY,CAAtZ,CAAR;IAAia,CAAtc,CAAR;EAAid,CAArwF,EAAswF,KAAKwF,MAAL,GAAY,UAASrH,CAAT,EAAW;IAACa,CAAC,CAACsE,SAAF,CAAYmC,GAAZ,CAAgBtH,CAAhB,EAAkBA,CAAlB;EAAqB,CAAnzF,EAAozF,KAAKuH,kBAAL,GAAwB,UAASvH,CAAT,EAAWE,CAAX,EAAa;IAAC,IAAIE,CAAC,GAAC,UAASE,CAAT,EAAW;MAACA,CAAC,CAACkH,WAAF,IAAe5D,CAAC,CAACtD,CAAC,CAACkH,WAAH,EAAexH,CAAf,CAAhB,KAAoCE,CAAC,CAACI,CAAD,CAAD,EAAKO,CAAC,CAACsE,SAAF,CAAYsC,MAAZ,CAAmBrH,CAAnB,CAAzC;IAAgE,CAAlF;;IAAmFS,CAAC,CAACsE,SAAF,CAAYmC,GAAZ,CAAgBlH,CAAhB,EAAkBA,CAAlB;EAAqB,CAAl8F,EAAm8F,KAAK4G,IAAL,GAAU,UAAShH,CAAT,EAAW;IAAC,OAAOE,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIX,CAAJ;MAAA,IAAMM,CAAN;MAAA,IAAQE,CAAR;MAAA,IAAUE,CAAV;MAAA,IAAYC,CAAC,GAAC,IAAd;MAAmB,OAAOT,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,IAAG,CAAC,KAAKkE,OAAL,EAAJ,EAAmB,MAAMzF,CAAC,CAAC,0CAAD,CAAP;YAAoD,OAAOE,CAAC,GAAC;cAACuD,MAAM,EAACE,CAAC,CAACjE,CAAC,CAACiH,SAAH,CAAT;cAAuBnD,UAAU,EAAC,KAAKkB,cAAL,CAAoBlB,UAApB,IAAgC,EAAlE;cAAqEE,SAAS,EAAE,IAAI0D,IAAJ,EAAD,CAAWC,OAAX;YAA/E,CAAF,EAAuG,CAAC,CAAD,EAAG,KAAKC,mBAAL,CAAyB5H,CAAzB,CAAH,CAA9G;;UAA8I,KAAK,CAAL;YAAO,OAAOQ,CAAC,CAACqH,OAAF,GAAUzH,CAAC,CAACqC,IAAF,EAAV,EAAmBvC,CAAC,GAACM,CAArB,EAAuB,UAAQI,CAAC,GAAC,UAAQF,CAAC,GAAC,KAAKwE,sBAAf,KAAwC,KAAK,CAAL,KAASxE,CAAjD,GAAmD,KAAK,CAAxD,GAA0DA,CAAC,CAAC2F,aAAtE,KAAsF,KAAK,CAAL,KAASzF,CAA/F,IAAkGA,CAAC,CAACkH,WAAF,CAAc;cAACC,eAAe,EAAC7H;YAAjB,CAAd,EAAkC,GAAlC,CAAzH,EAAgK,KAAKmF,YAAL,CAAkBtD,IAAlB,CAAuB8B,CAAC,CAAC3D,CAAD,CAAxB,CAAhK,EAA6L,CAAC,CAAD,EAAG,IAAIwG,OAAJ,CAAa,UAAS1G,CAAT,EAAW;cAACa,CAAC,CAAC0G,kBAAF,CAAqBrH,CAArB,EAAwB,UAASA,CAAT,EAAW;gBAACF,CAAC,CAACE,CAAC,CAAC2H,OAAH,CAAD;cAAa,CAAjD;YAAoD,CAA7E,CAAH,CAApM;;UAAwR,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,EAAGzH,CAAC,CAACqC,IAAF,EAAH,CAAN;QAAlhB;MAAsiB,CAAzjB,CAAR;IAAokB,CAApnB,CAAR;EAA+nB,CAAxlH,EAAylH,KAAKuF,KAAL,GAAW,UAAShI,CAAT,EAAWQ,CAAX,EAAa;IAAC,OAAON,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIX,CAAJ,EAAMQ,CAAN,EAAQG,CAAR,EAAUC,CAAV;MAAY,OAAOV,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,IAAG,CAAC,KAAKkE,OAAL,EAAJ,EAAmB,MAAMzF,CAAC,CAAC,0CAAD,CAAP;YAAoD,IAAG,CAACN,CAAC,CAAC8D,UAAH,IAAe,CAAC9D,CAAC,CAACgE,SAArB,EAA+B,MAAM1D,CAAC,CAACM,CAAD,EAAG,6BAAH,CAAP;YAAyC,OAAOF,CAAC,GAAC;cAACqD,MAAM,EAAC3C,CAAC,CAACC;YAAV,CAAF,EAAuB,CAAC,CAAD,EAAG,KAAKuG,mBAAL,CAAyBpH,CAAzB,CAAH,CAA9B;;UAA8D,KAAK,CAAL;YAAO,OAAOE,CAAC,CAACmH,OAAF,GAAUzH,CAAC,CAACqC,IAAF,EAAV,EAAmB/B,CAAC,CAACoD,UAAF,GAAa,KAAKkB,cAAL,CAAoBlB,UAApB,IAAgC,EAAhE,EAAmEpD,CAAC,CAACsD,SAAF,GAAa,IAAI0D,IAAJ,EAAD,CAAWC,OAAX,EAA/E,EAAoGjH,CAAC,CAAC8G,WAAF,GAAc;cAACzD,MAAM,EAAC/D,CAAC,CAAC+D,MAAV;cAAiBD,UAAU,EAAC9D,CAAC,CAAC8D,UAA9B;cAAyCE,SAAS,EAAChE,CAAC,CAACgE;YAArD,CAAlH,EAAkL9D,CAAC,GAACQ,CAApL,EAAsL,UAAQI,CAAC,GAAC,UAAQD,CAAC,GAAC,KAAKqE,sBAAf,KAAwC,KAAK,CAAL,KAASrE,CAAjD,GAAmD,KAAK,CAAxD,GAA0DA,CAAC,CAACwF,aAAtE,KAAsF,KAAK,CAAL,KAASvF,CAA/F,IAAkGA,CAAC,CAACgH,WAAF,CAAc;cAACC,eAAe,EAAC7H;YAAjB,CAAd,EAAkC,GAAlC,CAAxR,EAA+T,KAAKmF,YAAL,CAAkBtD,IAAlB,CAAuB8B,CAAC,CAAC3D,CAAD,CAAxB,CAA/T,EAA4V,CAAC,CAAD,CAAnW;QAA3O;MAAmlB,CAAtmB,CAAR;IAAinB,CAA1pB,CAAR;EAAqqB,CAAvxI,EAAwxI,KAAK+H,OAAL,GAAa,UAASjI,CAAT,EAAWE,CAAX,EAAa;IAAC,KAAK,CAAL,KAASF,CAAT,KAAaA,CAAC,GAAC,SAAf,GAA0Ba,CAAC,CAACmG,IAAF,CAAO;MAACC,SAAS,EAAClG,CAAC,CAACE,QAAb;MAAsBiH,GAAG,EAAClI,CAA1B;MAA4B2G,IAAI,EAACzG;IAAjC,CAAP,CAA1B;EAAsE,CAAz3I,EAA03I,KAAKiI,OAAL,GAAa,UAASnI,CAAT,EAAW;IAAC,OAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,SAAf,GAA0BE,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,OAAOT,CAAC,CAAC,IAAD,EAAO,UAASF,CAAT,EAAW;QAAC,QAAOA,CAAC,CAAC2B,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,EAAG,KAAKmF,IAAL,CAAU;cAACC,SAAS,EAAClG,CAAC,CAACC,QAAb;cAAsBkH,GAAG,EAAClI;YAA1B,CAAV,CAAH,CAAN;;UAAkD,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,EAAGE,CAAC,CAACuC,IAAF,EAAH,CAAN;QAAhF;MAAoG,CAAvH,CAAR;IAAkI,CAA/J,CAAlC;EAAoM,CAAvlJ,EAAwlJ,KAAKoE,gBAAL,GAAsB,UAASvG,CAAT,EAAW;IAAC,OAAOJ,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIL,CAAJ;MAAA,IAAME,CAAC,GAAC,IAAR;MAAa,OAAON,CAAC,CAAC,IAAD,EAAO,UAASQ,CAAT,EAAW;QAAC,OAAM,CAACJ,CAAC,GAACF,CAAC,CAACqG,IAAF,CAAOoB,eAAV,KAA4B,KAAK1C,YAAL,CAAkBhB,QAAlB,CAA2BR,CAAC,CAACrD,CAAD,CAA5B,KAAkCA,CAAC,CAACsD,UAAF,KAAe,KAAKkB,cAAL,CAAoBlB,UAArE,IAAiFtD,CAAC,CAACuD,MAAF,KAAW3C,CAAC,CAACC,SAAb,IAAwB,CAACb,CAAC,CAACgH,WAA5G,IAAyH,KAAKrC,SAAL,CAAeiD,OAAf,CAAwB,UAAS9H,CAAT,EAAW;UAAC,OAAOJ,CAAC,CAACQ,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;YAAC,IAAIR,CAAJ,EAAMQ,CAAN,EAAQE,CAAR;YAAU,OAAOR,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;cAAC,QAAOA,CAAC,CAACyB,KAAT;gBAAgB,KAAK,CAAL;kBAAO,OAAO3B,CAAC,GAACI,CAAF,EAAII,CAAC,GAAC,CAACV,CAAC,CAAC,EAAD,EAAIQ,CAAJ,CAAF,CAAN,EAAgBI,CAAC,GAAC,EAAlB,EAAqB,CAAC,CAAD,EAAG,KAAKyH,mBAAL,CAAyB7H,CAAC,CAACqH,OAA3B,CAAH,CAA5B;;gBAAoE,KAAK,CAAL;kBAAO,OAAO3H,CAAC,CAACoI,KAAF,CAAQ,KAAK,CAAb,EAAe,CAACtI,CAAC,CAACsI,KAAF,CAAQ,KAAK,CAAb,EAAe5H,CAAC,CAAC6H,MAAF,CAAS,EAAE3H,CAAC,CAACiH,OAAF,GAAUzH,CAAC,CAACqC,IAAF,EAAV,EAAmB7B,CAArB,EAAT,CAAf,CAAD,CAAf,GAAqE,CAAC,CAAD,CAA5E;cAAlG;YAAmL,CAAtM,CAAR;UAAiN,CAAxP,CAAR;QAAmQ,CAAvS,CAAzH,EAAma,CAAC,CAAD,CAA/b,IAAoc,CAAC,CAAD,CAA1c;MAA8c,CAAje,CAAR;IAA4e,CAAthB,CAAR;EAAiiB,CAA3pK,EAA4pK,KAAKgH,mBAAL,GAAyB,UAAS5H,CAAT,EAAW;IAAC,OAAOE,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIX,CAAJ,EAAMI,CAAN,EAAQE,CAAR,EAAUE,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB;MAAkB,OAAOV,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAO3B,CAAC,GAAC,KAAK8E,cAAP,EAAsB1E,CAAC,GAACJ,CAAC,CAAC4D,UAA1B,EAAqCtD,CAAC,GAACN,CAAC,CAAC+E,SAAzC,EAAmDrE,CAAC,GAAC,CAACF,CAAC,GAAC8H,IAAH,EAASC,SAA9D,EAAwE3H,CAAC,GAAC;cAACmG,SAAS,EAACjH,CAAC,CAACiH,SAAb;cAAuBiB,GAAG,EAAClI,CAAC,CAACkI,GAAF,GAAMlI,CAAC,CAACkI,GAAR,GAAY,KAAK;YAA5C,CAA1E,EAAyHlI,CAAC,CAAC2G,IAAF,GAAO,CAAC,CAAD,EAAGjE,CAAC,CAACpC,CAAD,EAAGE,CAAH,EAAKgI,IAAI,CAACC,SAAL,CAAezI,CAAC,CAAC2G,IAAjB,CAAL,CAAJ,CAAP,GAAyC,CAAC,CAAD,EAAG,CAAH,CAAzK;;UAA+K,KAAK,CAAL;YAAO,OAAO9F,CAAC,GAACT,CAAC,CAACqC,IAAF,EAAF,EAAW,CAAC,CAAD,EAAG,CAAH,CAAlB;;UAAwB,KAAK,CAAL;YAAO5B,CAAC,GAAC,KAAK,CAAP,EAAST,CAAC,CAACyB,KAAF,GAAQ,CAAjB;;UAAmB,KAAK,CAAL;YAAO,OAAM,CAAC,CAAD,EAAGjB,CAAC,CAAC0H,KAAF,CAAQ5H,CAAR,EAAU,EAAEI,CAAC,CAAC6F,IAAF,GAAO9F,CAAP,EAASC,CAAX,EAAV,CAAH,CAAN;QAAtQ;MAA2S,CAA9T,CAAR;IAAyU,CAAxX,CAAR;EAAmY,CAApkL,EAAqkL,KAAKuH,mBAAL,GAAyB,UAAS/H,CAAT,EAAW;IAAC,OAAOJ,CAAC,CAACW,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAkB,YAAU;MAAC,IAAIX,CAAJ,EAAMM,CAAN,EAAQE,CAAR,EAAUE,CAAV,EAAYC,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB,EAAkBK,CAAlB;MAAoB,OAAOhB,CAAC,CAAC,IAAD,EAAO,UAASA,CAAT,EAAW;QAAC,QAAOA,CAAC,CAACyB,KAAT;UAAgB,KAAK,CAAL;YAAO,OAAO3B,CAAC,GAAC,KAAK8E,cAAP,EAAsBxE,CAAC,GAACN,CAAC,CAAC4D,UAA1B,EAAqCpD,CAAC,GAACR,CAAC,CAAC+E,SAAzC,EAAmD,CAACrE,CAAC,GAAC4H,IAAI,CAACE,KAAL,CAAWpI,CAAX,CAAH,EAAkBqG,IAAlB,IAAwB,YAAU,OAAO/F,CAAC,CAAC+F,IAA3C,IAAiDvF,CAAC,GAAC,CAACL,CAAC,GAACyH,IAAH,EAASE,KAAX,EAAiB,CAAC,CAAD,EAAGtF,CAAC,CAAC5C,CAAD,EAAGE,CAAH,EAAKE,CAAC,CAAC+F,IAAP,CAAJ,CAAlE,IAAqF,CAAC,CAAD,EAAG,CAAH,CAA/I;;UAAqJ,KAAK,CAAL;YAAO,OAAO7F,CAAC,GAACM,CAAC,CAACkH,KAAF,CAAQvH,CAAR,EAAU,CAACX,CAAC,CAACqC,IAAF,EAAD,CAAV,CAAF,EAAwB,CAAC,CAAD,EAAG,CAAH,CAA/B;;UAAqC,KAAK,CAAL;YAAO3B,CAAC,GAAC,KAAK,CAAP,EAASV,CAAC,CAACyB,KAAF,GAAQ,CAAjB;;UAAmB,KAAK,CAAL;YAAO,OAAOhB,CAAC,GAACC,CAAF,EAAI,CAAC,CAAD,EAAGd,CAAC,CAACA,CAAC,CAAC,EAAD,EAAIY,CAAJ,CAAF,EAAS;cAAC+F,IAAI,EAAC9F;YAAN,CAAT,CAAJ,CAAX;QAAzP;MAA6R,CAAhT,CAAR;IAA2T,CAA5W,CAAR;EAAuX,CAAj+L,EAAk+L,KAAK8E,UAAL,GAAgBjF,CAAl/L;AAAo/L,CAAjhM;;AAAkhM,eAAeqE,CAAf;AAAiB,SAAO3D,CAAC,IAAIuH,MAAZ,EAAmB7H,CAAC,IAAI8H,UAAxB,EAAmC7H,CAAC,IAAI8H,UAAxC,EAAmDnH,CAAC,IAAIoH,6BAAxD,EAAsFnH,CAAC,IAAIoH,sBAA3F,EAAkHlI,CAAC,IAAImI,cAAvH,EAAsIzH,CAAC,IAAI0H,MAA3I,EAAkJhF,CAAC,IAAIiF,cAAvJ,EAAsKrF,CAAC,IAAIsF,SAA3K,EAAqLvF,CAAC,IAAIwF,WAA1L,EAAsM9E,CAAC,IAAI+E,sBAA3M"},"metadata":{},"sourceType":"module"}