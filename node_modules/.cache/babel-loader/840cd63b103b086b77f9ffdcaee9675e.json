{"ast":null,"code":"import { LIFF_EVENT as t, INVALID_ARGUMENT as e, FORBIDDEN as i } from \"@liff/consts\";\nimport { logger as o } from \"@liff/logger\";\nimport { createLiffError as n, randomAlphaNumericString as a } from \"@liff/util\";\nimport { getFeatureToken as r } from \"@liff/store\";\nimport { __assign as l } from \"tslib\";\n\nfunction d(e) {\n  return new CustomEvent(t, {\n    detail: e\n  });\n}\n\n!function () {\n  if (\"function\" != typeof window.CustomEvent) {\n    function t(t, e) {\n      var i = e || {},\n          o = i.bubbles,\n          n = void 0 !== o && o,\n          a = i.cancelable,\n          r = void 0 !== a && a,\n          l = i.detail,\n          d = void 0 === l ? void 0 : l,\n          f = document.createEvent(\"CustomEvent\");\n      return f.initCustomEvent(t, n, r, d), f;\n    }\n\n    t.prototype = Event.prototype, window.CustomEvent = t;\n  }\n}();\nvar f = {},\n    c = !1;\n\nfunction s(e, i) {\n  c || (c = !0, window.addEventListener(t, function (t) {\n    t && t.detail && t.detail.type && f[t.detail.type] && f[t.detail.type].forEach(function (e) {\n      return e(t);\n    });\n  })), f[e] ? f[e].push(i) : f[e] = [i];\n}\n\nfunction u(t, e) {\n  var i = f[t];\n\n  if (i && Array.isArray(i)) {\n    var o = i.indexOf(e);\n    o >= 0 && i.splice(o, 1);\n  }\n}\n\nfunction v(t) {\n  var i = {};\n\n  try {\n    i = JSON.parse(t);\n  } catch (r) {\n    throw n(e, r.message);\n  }\n\n  var a = d(i);\n  o.debug(\"[client dispatchEvent to js]\", {\n    type: a.type,\n    detail: a.detail\n  }), window.dispatchEvent(a);\n}\n\nfunction p(t, a, l) {\n  void 0 === a && (a = {}), void 0 === l && (l = \"\");\n  var d = r();\n  if (!d) throw n(i, \"Invalid featureToken for client features\");\n  if (!window._liff || !window._liff.postMessage) throw n(e, \"postMessage is not available from client\");\n  o.debug(\"[js postMessage to client]\", t, l, a), window._liff.postMessage(t, d, l, JSON.stringify(a));\n}\n\nfunction m(t, e, d) {\n  return void 0 === e && (e = {}), void 0 === d && (d = {\n    once: !0\n  }), r() ? (d = l({\n    callbackId: a(12),\n    once: !0\n  }, d), new Promise(function (i, n) {\n    var a = function (e) {\n      if (e && e.detail) {\n        var r = e.detail.callbackId === d.callbackId,\n            l = \"string\" != typeof e.detail.callbackId;\n        (r || l) && (d.once && u(t, a), o.debug(\"[callback detail]\", e.detail), e.detail.error ? n(e.detail.error) : e.detail.data ? i(e.detail.data) : n(e.detail));\n      }\n\n      n();\n    };\n\n    s(t, a), p(t, e, d.callbackId);\n  })) : Promise.reject(n(i, \"Invalid featureToken for client features\"));\n}\n\nexport { s as addListener, m as call, d as createEvent, v as dispatch, p as postMessage, u as removeListener };","map":{"version":3,"names":["LIFF_EVENT","t","INVALID_ARGUMENT","e","FORBIDDEN","i","logger","o","createLiffError","n","randomAlphaNumericString","a","getFeatureToken","r","__assign","l","d","CustomEvent","detail","window","bubbles","cancelable","f","document","createEvent","initCustomEvent","prototype","Event","c","s","addEventListener","type","forEach","push","u","Array","isArray","indexOf","splice","v","JSON","parse","message","debug","dispatchEvent","p","_liff","postMessage","stringify","m","once","callbackId","Promise","error","data","reject","addListener","call","dispatch","removeListener"],"sources":["C:/Users/ASUS/Desktop/linetest/node_modules/@liff/native-bridge/lib/index.es.js"],"sourcesContent":["import{LIFF_EVENT as t,INVALID_ARGUMENT as e,FORBIDDEN as i}from\"@liff/consts\";import{logger as o}from\"@liff/logger\";import{createLiffError as n,randomAlphaNumericString as a}from\"@liff/util\";import{getFeatureToken as r}from\"@liff/store\";import{__assign as l}from\"tslib\";function d(e){return new CustomEvent(t,{detail:e})}!function(){if(\"function\"!=typeof window.CustomEvent){function t(t,e){var i=e||{},o=i.bubbles,n=void 0!==o&&o,a=i.cancelable,r=void 0!==a&&a,l=i.detail,d=void 0===l?void 0:l,f=document.createEvent(\"CustomEvent\");return f.initCustomEvent(t,n,r,d),f}t.prototype=Event.prototype,window.CustomEvent=t}}();var f={},c=!1;function s(e,i){c||(c=!0,window.addEventListener(t,(function(t){t&&t.detail&&t.detail.type&&f[t.detail.type]&&f[t.detail.type].forEach((function(e){return e(t)}))}))),f[e]?f[e].push(i):f[e]=[i]}function u(t,e){var i=f[t];if(i&&Array.isArray(i)){var o=i.indexOf(e);o>=0&&i.splice(o,1)}}function v(t){var i={};try{i=JSON.parse(t)}catch(r){throw n(e,r.message)}var a=d(i);o.debug(\"[client dispatchEvent to js]\",{type:a.type,detail:a.detail}),window.dispatchEvent(a)}function p(t,a,l){void 0===a&&(a={}),void 0===l&&(l=\"\");var d=r();if(!d)throw n(i,\"Invalid featureToken for client features\");if(!window._liff||!window._liff.postMessage)throw n(e,\"postMessage is not available from client\");o.debug(\"[js postMessage to client]\",t,l,a),window._liff.postMessage(t,d,l,JSON.stringify(a))}function m(t,e,d){return void 0===e&&(e={}),void 0===d&&(d={once:!0}),r()?(d=l({callbackId:a(12),once:!0},d),new Promise((function(i,n){var a=function(e){if(e&&e.detail){var r=e.detail.callbackId===d.callbackId,l=\"string\"!=typeof e.detail.callbackId;(r||l)&&(d.once&&u(t,a),o.debug(\"[callback detail]\",e.detail),e.detail.error?n(e.detail.error):e.detail.data?i(e.detail.data):n(e.detail))}n()};s(t,a),p(t,e,d.callbackId)}))):Promise.reject(n(i,\"Invalid featureToken for client features\"))}export{s as addListener,m as call,d as createEvent,v as dispatch,p as postMessage,u as removeListener};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}